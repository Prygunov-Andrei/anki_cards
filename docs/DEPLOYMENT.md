# üöÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

> **–°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è:** —Å–º. [`../scripts/`](../scripts/)

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º](#—á–µ–∫–ª–∏—Å—Ç-–ø–µ—Ä–µ–¥-–¥–µ–ø–ª–æ–µ–º)
2. [–†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π](#—Ä—É—á–Ω–æ–π-–¥–µ–ø–ª–æ–π)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞-–∏-ssl)
4. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- [x] **Gunicorn:** Workers: 2, Timeout: 120s, Max-requests: 1000
- [x] **Docker Compose:** Restart policy `unless-stopped`
- [x] **–°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è:** –û–±–Ω–æ–≤–ª–µ–Ω—ã IP –∏ –ø–∞—Ä–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞

### ‚ö†Ô∏è –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   ping 194.87.200.188
   ssh root@194.87.200.188
   ```

2. **–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**

---

## –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

### –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º:**
   ```bash
   docker compose config
   ```

2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:**
   ```bash
   docker compose down
   ```

3. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:**
   ```bash
   # –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
   docker compose up -d --build

   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
   docker compose ps
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
   ```bash
   docker compose logs -f backend
   ```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:

**–û—Å–Ω–æ–≤–Ω–æ–π –¥–µ–ø–ª–æ–π:**
```bash
./scripts/deploy.sh
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ –∏ SSL

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

1. –ù–∞ —Å–∞–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ –¥–æ–±–∞–≤–∏—Ç—å A-–∑–∞–ø–∏—Å—å:
   - `www.get-anki.fun` ‚Üí `194.87.200.188`
   - `get-anki.fun` ‚Üí `194.87.200.188`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å nginx:**
   ```bash
   docker compose stop nginx
   ```

2. **–ü–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):**
   ```bash
   certbot certonly --standalone -d www.get-anki.fun -d get-anki.fun \
     --non-interactive --agree-tos --email admin@get-anki.fun
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å nginx:**
   ```bash
   docker compose start nginx
   ```

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### üö® –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```bash
   docker compose logs > logs.txt
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:**
   ```bash
   docker compose restart backend
   ```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**–ü—Ä–æ–±–ª–µ–º–∞: Backend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ë–î**
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å Docker —Å–µ—Ç—å—é
- **–†–µ—à–µ–Ω–∏–µ:** `docker compose down && docker compose up -d`

**–ü—Ä–æ–±–ª–µ–º–∞: 502 Bad Gateway**
- **–ü—Ä–∏—á–∏–Ω–∞:** Backend –µ—â–µ –Ω–µ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∏–ª–∏ —É–ø–∞–ª
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend: `docker compose logs backend`
