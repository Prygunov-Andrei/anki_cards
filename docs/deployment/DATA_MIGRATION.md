# üì¶ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

## –û–±–∑–æ—Ä

–ü—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)

**–ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ –±—ç–∫–∞–ø!**

```bash
./scripts/backup_data.sh
```

**–ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è:**
- `backups/anki_backup_YYYYMMDD_HHMMSS.tar.gz` ‚Äî –∞—Ä—Ö–∏–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏
- –í–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞:
  - `data.json` ‚Äî –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î (JSON —Ñ–æ—Ä–º–∞—Ç)
  - `media/` ‚Äî –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∞—É–¥–∏–æ, –∞–≤–∞—Ç–∞—Ä—ã)
  - `backup_info.txt` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—ç–∫–∞–ø–µ

**–ß—Ç–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:**
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏)
- ‚úÖ –ö–æ–ª–æ–¥—ã (Decks)
- ‚úÖ –°–ª–æ–≤–∞ (Words)
- ‚úÖ –¢–æ–∫–µ–Ω—ã (Tokens)
- ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–ª–æ–¥—ã (GeneratedDecks)
- ‚úÖ –í—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã

**–ß—Ç–æ –ù–ï —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è:**
- ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (permissions, contenttypes, sessions)
- ‚ùå –õ–æ–≥–∏ –∞–¥–º–∏–Ω–∫–∏

---

### –®–∞–≥ 2: –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [DEPLOYMENT.md](./DEPLOYMENT.md) –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π!

---

### –®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∞—Ä—Ö–∏–≤ –±—ç–∫–∞–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**

```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp backups/anki_backup_*.tar.gz user@your-server:/path/to/anki_cards/
```

2. **–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:**

```bash
cd /path/to/anki_cards
./scripts/restore_data.sh backups/anki_backup_YYYYMMDD_HHMMSS.tar.gz
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
1. –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤
2. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ `data.json`
4. –ö–æ–ø–∏—Ä—É–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
5. –°–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
curl http://your-server/admin/

# –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# http://your-server/admin/
```

---

## üõ†Ô∏è –†—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

### 1. –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞

```bash
tar -xzf anki_backup_YYYYMMDD_HHMMSS.tar.gz
cd anki_backup_YYYYMMDD_HHMMSS
```

### 2. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

```bash
# –ö–æ–ø–∏—Ä—É–µ–º data.json –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker cp data.json $(docker-compose ps -q backend):/tmp/data.json

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
docker-compose exec backend python manage.py loaddata /tmp/data.json
```

### 3. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker cp media/. $(docker-compose ps -q backend):/app/media/

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
docker-compose exec backend chmod -R 755 /app/media
```

### 4. –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏

```bash
docker-compose exec backend python manage.py collectstatic --noinput
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
   ```bash
   docker-compose exec backend python manage.py shell
   >>> from apps.users.models import User
   >>> User.objects.count()
   ```

2. **–ö–æ–ª–æ–¥—ã:**
   ```bash
   >>> from apps.cards.models import Deck
   >>> Deck.objects.count()
   ```

3. **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã:**
   ```bash
   docker-compose exec backend ls -la /app/media/images/ | head -10
   docker-compose exec backend ls -la /app/media/audio/ | head -10
   ```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ü–∞—Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- –ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –≤–æ–π—Ç–∏ —Å–æ —Å–≤–æ–∏–º–∏ —Å—Ç–∞—Ä—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏
- –ü–∞—Ä–æ–ª–∏ –ù–ï —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ (—ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ)

### –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã

- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Nginx –º–æ–∂–µ—Ç –æ—Ç–¥–∞–≤–∞—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã

### –†–∞–∑–º–µ—Ä –±—ç–∫–∞–ø–∞

- –ë—ç–∫–∞–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–∏–º (–æ—Å–æ–±–µ–Ω–Ω–æ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏)
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º: `du -h backup.tar.gz`

---

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –±—ç–∫–∞–ø—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ:

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00 –Ω–æ—á–∏
0 2 * * * cd /path/to/anki_cards && ./scripts/backup_data.sh
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏—Å—Ç–µ–º—É –±—ç–∫–∞–ø–æ–≤ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥–∞.

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç JSON
cat data.json | python -m json.tool > /dev/null

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs backend | tail -50
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
docker-compose exec backend ls -la /app/media/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx
docker-compose exec frontend cat /etc/nginx/conf.d/default.conf
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –≤–æ–π—Ç–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω—ã (–Ω–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- [ ] –ê—Ä—Ö–∏–≤ –±—ç–∫–∞–ø–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] –î–∞–Ω–Ω—ã–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫–æ–ª–æ–¥—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 7 –¥–µ–∫–∞–±—Ä—è 2025

