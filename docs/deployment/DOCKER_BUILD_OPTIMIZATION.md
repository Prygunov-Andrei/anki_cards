# üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ Docker

## –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. –ú–µ–¥–ª–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** pip –¥–æ–ª–≥–æ —Ä–∞–∑—Ä–µ—à–∞–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π –¥–ª—è `google-generativeai` –∏ –µ–≥–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (grpcio, google-api-python-client).

**–†–µ—à–µ–Ω–∏–µ:** 
- –î–æ–±–∞–≤–ª–µ–Ω pip cache mount: `--mount=type=cache,target=/root/.cache/pip`
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫–∞—á–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É —Å–±–æ—Ä–∫–∞–º–∏

### 2. collectstatic –≤ Dockerfile

**–ü—Ä–æ–±–ª–µ–º–∞:** `collectstatic` –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –≤ Dockerfile –¥–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î, —á—Ç–æ –º–æ–≥–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω `collectstatic` –∏–∑ Dockerfile
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ `docker-compose.yml` –≤ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ (–ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–π)

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤ Docker

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ü–æ—Ä—è–¥–æ–∫ –∫–æ–º–∞–Ω–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ª—É—á—à–µ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Python –ø–∞–∫–µ—Ç–æ–≤

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à Docker

```bash
# –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ --no-cache –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–±–æ—Ä–∫–µ
docker-compose build

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --no-cache —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å—ë
docker-compose build --no-cache
```

### 2. –°–æ–±–∏—Ä–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

```bash
# –¢–æ–ª—å–∫–æ backend
docker-compose build backend

# –¢–æ–ª—å–∫–æ frontend
docker-compose build frontend
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ BuildKit

BuildKit –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Docker Desktop –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç cache mounts.

---

## –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –≤—Å—ë –µ—â—ë –º–µ–¥–ª–µ–Ω–Ω–∞—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
curl -o /dev/null -s -w "%{speed_download}\n" https://pypi.org/simple/
```

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π pip mirror (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π PyPI mirror, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤ Dockerfile:

```dockerfile
RUN pip install --index-url http://your-mirror/simple -r requirements.txt
```

### –£–ø—Ä–æ—Å—Ç–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å:
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –£–±—Ä–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã –∏–∑ requirements.txt

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 7 –¥–µ–∫–∞–±—Ä—è 2025

