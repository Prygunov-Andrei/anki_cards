# üÉè –≠—Ç–∞–ø 3: –ú–æ–¥–µ–ª—å Card (–µ–¥–∏–Ω–∏—Ü–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)

> **–°—Ç–∞—Ç—É—Å**: üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
> **–¢–∏–ø**: Backend  
> **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –≠—Ç–∞–ø 1 (Word), –≠—Ç–∞–ø 2 (Category)  
> **–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø**: 4 (UserTrainingSettings)

---

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞

–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Card` ‚Äî –µ–¥–∏–Ω–∏—Ü—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –æ—Ç–¥–µ–ª—ë–Ω–Ω—É—é –æ—Ç —Å–ª–æ–≤–∞ (`Word`):

- **Word** ‚Äî –∑–Ω–∞–Ω–∏–µ (–∫–æ–Ω—Ç–µ–Ω—Ç: –ø–µ—Ä–µ–≤–æ–¥, —ç—Ç–∏–º–æ–ª–æ–≥–∏—è, –º–µ–¥–∏–∞, –ø—Ä–∏–º–µ—Ä—ã)
- **Card** ‚Äî —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ (–ø—Ä–æ–≥—Ä–µ—Å—Å SM-2, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–∏–ø—ã)

–û–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤, –∫–∞–∂–¥–∞—è –∂–∏–≤—ë—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –≤ —Å–∏—Å—Ç–µ–º–µ SM-2.

---

## üìã –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### –¢–∏–ø—ã –∫–∞—Ä—Ç–æ—á–µ–∫

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –õ–∏—Ü–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ | –û–±–æ—Ä–æ—Ç–Ω–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è |
|-----|----------|-----------------|-------------------|-----------------|
| `normal` | –°–ª–æ–≤–æ ‚Üí –ü–µ—Ä–µ–≤–æ–¥ | –ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ + –º–µ–¥–∏–∞ | –ü–µ—Ä–µ–≤–æ–¥ | ‚ùå –ù–µ—Ç |
| `inverted` | –ü–µ—Ä–µ–≤–æ–¥ ‚Üí –°–ª–æ–≤–æ | –ü–µ—Ä–µ–≤–æ–¥ | –ò–Ω–æ—Å—Ç—Ä–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ + –º–µ–¥–∏–∞ | ‚ùå –ù–µ—Ç |
| `empty` | –ú–µ–¥–∏–∞ ‚Üí –°–ª–æ–≤–æ | –¢–æ–ª—å–∫–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞/–∞—É–¥–∏–æ | –°–ª–æ–≤–æ + –ø–µ—Ä–µ–≤–æ–¥ | ‚úÖ –î–∞ |
| `cloze` | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–æ–ø—É—Å–∫–æ–º | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å `[...]` | –ü—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ | ‚úÖ –î–∞ |

### SM-2 –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–∞—Ä—Ç–æ—á–∫–µ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        CARD                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ease_factor      = 2.5   # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ª—ë–≥–∫–æ—Å—Ç–∏ (min 1.3)  ‚îÇ
‚îÇ interval         = 0     # –¢–µ–∫—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª (–¥–Ω–∏)          ‚îÇ
‚îÇ repetitions      = 0     # –£—Å–ø–µ—à–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥      ‚îÇ
‚îÇ lapses           = 0     # –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–∞–ª–æ–≤       ‚îÇ
‚îÇ consecutive_lapses = 0   # –ü—Ä–æ–≤–∞–ª–æ–≤ –ø–æ–¥—Ä—è–¥ (‚Üí Learning)    ‚îÇ
‚îÇ learning_step    = 0     # –®–∞–≥ –æ–±—É—á–µ–Ω–∏—è (0=2–º–∏–Ω, 1=10–º–∏–Ω)  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ next_review      = None  # –ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑–∞—Ç—å                  ‚îÇ
‚îÇ last_review      = None  # –ö–æ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ is_in_learning_mode = True   # –í —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è           ‚îÇ
‚îÇ is_auxiliary        = False  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è (—Å–≥–æ—Ä–∞–µ—Ç)   ‚îÇ
‚îÇ is_suspended        = False  # –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∫–∞—Ä—Ç–æ—á–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     –°–æ–∑–¥–∞–Ω–∏–µ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Word     ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ Card (normal)     ‚îÇ
‚îÇ             ‚îÇ   (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏) ‚îÇ is_in_learning=T  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
                                          ‚îÇ –ü–µ—Ä–≤—ã–π –ø–æ–∫–∞–∑
                                          ‚ñº
                                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                  ‚îÇ   Learning Mode   ‚îÇ
                                  ‚îÇ (–≥–ª—É–±–æ–∫–æ–µ –∏–∑—É—á.)  ‚îÇ
                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
                                          ‚îÇ –ü–æ—Å–ª–µ –∏–∑—É—á–µ–Ω–∏—è
                                          ‚ñº
                                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                  ‚îÇ   SM-2 Review     ‚îÇ
                                  ‚îÇ (–∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ)    ‚îÇ
                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                                ‚îÇ                                ‚îÇ
         ‚ñº                                ‚ñº                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ï—Å–ª–∏ 4√ó "–°–Ω–æ–≤–∞" ‚îÇ              ‚îÇ  interval > 60  ‚îÇ              ‚îÇ  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å   ‚îÇ
‚îÇ ‚Üí Learning Mode ‚îÇ              ‚îÇ ‚Üí burn auxiliary‚îÇ              ‚îÇ ‚Üí Suspend/Unsup ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìã –ó–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Card

- [ ] **1.1** –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Card` —Å –ø–æ–ª—è–º–∏ SM-2
- [ ] **1.2** –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å `ForeignKey` –∫ `Word`
- [ ] **1.3** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è cloze-–∫–∞—Ä—Ç–æ—á–µ–∫
- [ ] **1.4** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
- [ ] **1.5** –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### 2. –ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–∏ Card

- [ ] **2.1** `create_from_word()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑ —Å–ª–æ–≤–∞
- [ ] **2.2** `create_inverted()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π
- [ ] **2.3** `create_empty()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø—É—Å—Ç–æ–π
- [ ] **2.4** `create_cloze()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ cloze –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- [ ] **2.5** `mark_as_burned()` ‚Äî "—Å–∂–∏–≥–∞–Ω–∏–µ" –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
- [ ] **2.6** `get_front_content()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ª–∏—Ü–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É
- [ ] **2.7** `get_back_content()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–±–æ—Ä–æ—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É

### 3. –ú–µ–Ω–µ–¥–∂–µ—Ä –º–æ–¥–µ–ª–∏ Card

- [ ] **3.1** `CardManager.for_user(user)` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] **3.2** `CardManager.due_for_review(user)` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- [ ] **3.3** `CardManager.in_learning(user)` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è
- [ ] **3.4** `CardManager.by_deck(deck)` ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ –∫–æ–ª–æ–¥–µ

### 4. –°–∏–≥–Ω–∞–ª—ã –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

- [ ] **4.1** –°–∏–≥–Ω–∞–ª –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Word ‚Üí –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ Card (normal)
- [ ] **4.2** –°–∏–≥–Ω–∞–ª –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ inverted/empty/cloze ‚Üí —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `is_auxiliary`

### 5. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

- [ ] **5.1** `CardSerializer` ‚Äî –ø–æ–ª–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
- [ ] **5.2** `CardListSerializer` ‚Äî –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
- [ ] **5.3** `CardCreateSerializer` ‚Äî –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–ø. –∫–∞—Ä—Ç–æ—á–µ–∫
- [ ] **5.4** `CardReviewSerializer` ‚Äî –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ

### 6. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

- [ ] **6.1** GET `/api/cards/` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] **6.2** GET `/api/cards/{id}/` ‚Äî –¥–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
- [ ] **6.3** POST `/api/words/{id}/cards/inverted/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é
- [ ] **6.4** POST `/api/words/{id}/cards/empty/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é
- [ ] **6.5** POST `/api/words/{id}/cards/cloze/` ‚Äî —Å–æ–∑–¥–∞—Ç—å cloze
- [ ] **6.6** DELETE `/api/cards/{id}/` ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
- [ ] **6.7** POST `/api/cards/{id}/suspend/` ‚Äî –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
- [ ] **6.8** POST `/api/cards/{id}/unsuspend/` ‚Äî –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å

### 7. –¢–µ—Å—Ç—ã

- [ ] **7.1** Unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–∏ Card (15+ —Ç–µ—Å—Ç–æ–≤)
- [ ] **7.2** Unit-—Ç–µ—Å—Ç—ã CardManager (6+ —Ç–µ—Å—Ç–æ–≤)
- [ ] **7.3** API-—Ç–µ—Å—Ç—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (10+ —Ç–µ—Å—Ç–æ–≤)
- [ ] **7.4** –¢–µ—Å—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤ –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è/—Å–æ–∑–¥–∞–Ω–∏—è

| –§–∞–π–ª | –î–µ–π—Å—Ç–≤–∏–µ |
|------|----------|
| `backend/apps/cards/models.py` | ‚ú® –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Card` |
| `backend/apps/cards/managers.py` | ‚ú® –°–æ–∑–¥–∞—Ç—å `CardManager` |
| `backend/apps/cards/signals.py` | ‚ú® –°–∏–≥–Ω–∞–ª –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è |
| `backend/apps/cards/apps.py` | –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã |
| `backend/apps/cards/serializers.py` | ‚ú® –î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã Card |
| `backend/apps/cards/views.py` | ‚ú® –î–æ–±–∞–≤–∏—Ç—å views –¥–ª—è Card |
| `backend/apps/cards/urls.py` | –î–æ–±–∞–≤–∏—Ç—å URL-–º–∞—Ä—à—Ä—É—Ç—ã |
| `backend/apps/cards/admin.py` | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Card |
| `backend/apps/cards/tests.py` | ‚ú® –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã |
| `frontend/src/types/index.ts` | –î–æ–±–∞–≤–∏—Ç—å TypeScript —Ç–∏–ø—ã |

---

## üíª –ö–æ–¥

### 1.1 –ú–æ–¥–µ–ª—å Card

**–§–∞–π–ª**: `backend/apps/cards/models.py`

```python
from django.db import models
from django.conf import settings
from django.utils import timezone
from apps.words.models import Word


class CardManager(models.Manager):
    """–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏"""
    
    def for_user(self, user):
        """–í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        return self.filter(user=user, is_suspended=False)
    
    def due_for_review(self, user):
        """
        –ö–∞—Ä—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å.
        - –ù–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
        - –ù–µ –≤ —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è (—É–∂–µ –ø—Ä–æ—à–ª–∏ Learning Mode)
        - next_review <= now
        """
        return self.filter(
            user=user,
            is_suspended=False,
            is_in_learning_mode=False,
            next_review__lte=timezone.now()
        ).order_by('next_review')
    
    def in_learning(self, user):
        """–ö–∞—Ä—Ç–æ—á–∫–∏ –≤ —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è"""
        return self.filter(
            user=user,
            is_suspended=False,
            is_in_learning_mode=True
        )
    
    def by_word(self, word):
        """–í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–≤–∞"""
        return self.filter(word=word)
    
    def by_deck(self, deck):
        """–ö–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–≤ –∏–∑ –∫–æ–ª–æ–¥—ã"""
        return self.filter(word__decks=deck, is_suspended=False)


class Card(models.Model):
    """
    –ö–∞—Ä—Ç–æ—á–∫–∞ ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.
    
    –•—Ä–∞–Ω–∏—Ç:
    - –°–≤—è–∑—å —Å–æ —Å–ª–æ–≤–æ–º (Word)
    - –¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏ (normal, inverted, empty, cloze)
    - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ SM-2
    - –°–æ—Å—Ç–æ—è–Ω–∏–µ (is_in_learning_mode, is_suspended, is_auxiliary)
    
    –û–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤.
    –ö–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∂–∏–≤—ë—Ç –≤ SM-2 –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
    """
    
    CARD_TYPES = [
        ('normal', '–û–±—ã—á–Ω–∞—è'),
        ('inverted', '–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è'),
        ('empty', '–ü—É—Å—Ç–∞—è'),
        ('cloze', '–° –ø—Ä–æ–ø—É—Å–∫–æ–º'),
    ]
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –°–í–Ø–ó–ò
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    user = models.ForeignKey(
        settings.AUTH_USER_MODEL,
        on_delete=models.CASCADE,
        related_name='cards',
        verbose_name='–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'
    )
    word = models.ForeignKey(
        Word,
        on_delete=models.CASCADE,
        related_name='cards',
        verbose_name='–°–ª–æ–≤–æ'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –¢–ò–ü –ö–ê–†–¢–û–ß–ö–ò
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    card_type = models.CharField(
        max_length=20,
        choices=CARD_TYPES,
        default='normal',
        verbose_name='–¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # CLOZE-–ö–ê–†–¢–û–ß–ö–ò (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è)
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    cloze_sentence = models.TextField(
        blank=True,
        default='',
        verbose_name='–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è cloze',
        help_text='–ü–æ–ª–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–∞'
    )
    cloze_word_index = models.IntegerField(
        default=0,
        verbose_name='–ò–Ω–¥–µ–∫—Å –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞',
        help_text='–ü–æ–∑–∏—Ü–∏—è —Å–ª–æ–≤–∞ –≤ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏ (0-based)'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # SM-2 –ü–ê–†–ê–ú–ï–¢–†–´
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    ease_factor = models.FloatField(
        default=2.5,
        verbose_name='Ease Factor',
        help_text='–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ª—ë–≥–∫–æ—Å—Ç–∏ (–º–∏–Ω–∏–º—É–º 1.3)'
    )
    interval = models.IntegerField(
        default=0,
        verbose_name='–ò–Ω—Ç–µ—Ä–≤–∞–ª (–¥–Ω–∏)',
        help_text='–¢–µ–∫—É—â–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è'
    )
    repetitions = models.IntegerField(
        default=0,
        verbose_name='–£—Å–ø–µ—à–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è',
        help_text='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥'
    )
    lapses = models.IntegerField(
        default=0,
        verbose_name='–û–±—â–∏–µ –ø—Ä–æ–≤–∞–ª—ã',
        help_text='–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–∂–∞—Ç–∏–π "–°–Ω–æ–≤–∞"'
    )
    consecutive_lapses = models.IntegerField(
        default=0,
        verbose_name='–ü—Ä–æ–≤–∞–ª—ã –ø–æ–¥—Ä—è–¥',
        help_text='–ü—Ä–æ–≤–∞–ª—ã –ø–æ–¥—Ä—è–¥ (4 ‚Üí —Ä–µ–∂–∏–º –ò–∑—É—á–µ–Ω–∏—è)'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –ü–õ–ê–ù–ò–†–û–í–ê–ù–ò–ï
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    next_review = models.DateTimeField(
        null=True,
        blank=True,
        verbose_name='–°–ª–µ–¥—É—é—â–∏–π –ø–æ–∫–∞–∑',
        db_index=True
    )
    last_review = models.DateTimeField(
        null=True,
        blank=True,
        verbose_name='–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–æ–∫–∞–∑'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –í–ù–£–¢–†–ò–°–ï–°–°–ò–û–ù–ù–û–ï –û–ë–£–ß–ï–ù–ò–ï
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    learning_step = models.IntegerField(
        default=0,
        verbose_name='–®–∞–≥ –æ–±—É—á–µ–Ω–∏—è',
        help_text='–¢–µ–∫—É—â–∏–π —à–∞–≥: 0=2–º–∏–Ω, 1=10–º–∏–Ω (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ UserTrainingSettings)'
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –°–¢–ê–¢–£–°–´
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    is_in_learning_mode = models.BooleanField(
        default=True,
        verbose_name='–í —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è',
        help_text='True = –µ—â—ë –Ω–µ –ø—Ä–æ—à—ë–ª Learning Mode'
    )
    is_auxiliary = models.BooleanField(
        default=False,
        verbose_name='–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è',
        help_text='True = empty/cloze, –º–æ–∂–µ—Ç "—Å–≥–æ—Ä–µ—Ç—å"'
    )
    is_suspended = models.BooleanField(
        default=False,
        verbose_name='–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞',
        db_index=True
    )
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –ú–ï–¢–ê–î–ê–ù–ù–´–ï
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    created_at = models.DateTimeField(
        auto_now_add=True,
        verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è'
    )
    updated_at = models.DateTimeField(
        auto_now=True,
        verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è'
    )
    
    objects = CardManager()
    
    class Meta:
        verbose_name = '–ö–∞—Ä—Ç–æ—á–∫–∞'
        verbose_name_plural = '–ö–∞—Ä—Ç–æ—á–∫–∏'
        ordering = ['next_review', '-created_at']
        indexes = [
            models.Index(fields=['user', 'is_suspended', 'next_review']),
            models.Index(fields=['user', 'is_in_learning_mode']),
            models.Index(fields=['word', 'card_type']),
        ]
        # –û–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
        unique_together = [['word', 'card_type', 'cloze_sentence']]
    
    def __str__(self):
        return f"[{self.card_type}] {self.word.original_word}"
    
    def save(self, *args, **kwargs):
        """–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–∞—Ä—Ç–æ—á–∫–∏ = –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ª–æ–≤–∞
        if self.word_id and self.word.user_id != self.user_id:
            raise ValueError("–ö–∞—Ä—Ç–æ—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å —Ç–æ–º—É –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –∏ —Å–ª–æ–≤–æ")
        
        # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è
        if self.card_type in ('empty', 'cloze'):
            self.is_auxiliary = True
        
        # –î–ª—è cloze –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
        if self.card_type == 'cloze' and not self.cloze_sentence:
            raise ValueError("Cloze-–∫–∞—Ä—Ç–æ—á–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ")
        
        super().save(*args, **kwargs)
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –§–ê–ë–†–ò–ß–ù–´–ï –ú–ï–¢–û–î–´
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    @classmethod
    def create_from_word(cls, word: Word, card_type: str = 'normal') -> 'Card':
        """
        –°–æ–∑–¥–∞—ë—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ —Å–ª–æ–≤–∞.
        
        Args:
            word: –°–ª–æ–≤–æ-–∏—Å—Ç–æ—á–Ω–∏–∫
            card_type: –¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏ ('normal' –∏–ª–∏ 'inverted')
        
        Returns:
            –°–æ–∑–¥–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
        """
        if card_type not in ('normal', 'inverted'):
            raise ValueError(f"–î–ª—è create_from_word –¥–æ–ø—É—Å—Ç–∏–º—ã —Ç–æ–ª—å–∫–æ 'normal' –∏ 'inverted', –ø–æ–ª—É—á–µ–Ω: {card_type}")
        
        card, created = cls.objects.get_or_create(
            user=word.user,
            word=word,
            card_type=card_type,
            defaults={
                'ease_factor': 2.5,
                'is_in_learning_mode': True,
                'is_auxiliary': False,
            }
        )
        return card
    
    @classmethod
    def create_inverted(cls, word: Word) -> 'Card':
        """–°–æ–∑–¥–∞—ë—Ç –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É"""
        return cls.create_from_word(word, 'inverted')
    
    @classmethod
    def create_empty(cls, word: Word) -> 'Card':
        """
        –°–æ–∑–¥–∞—ë—Ç –ø—É—Å—Ç—É—é –∫–∞—Ä—Ç–æ—á–∫—É (—Ç–æ–ª—å–∫–æ –º–µ–¥–∏–∞ ‚Üí —Å–ª–æ–≤–æ).
        –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –∞—É–¥–∏–æ —É —Å–ª–æ–≤–∞.
        """
        if not word.image_file and not word.audio_file:
            raise ValueError("–î–ª—è empty-–∫–∞—Ä—Ç–æ—á–∫–∏ —É —Å–ª–æ–≤–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –∞—É–¥–∏–æ")
        
        card, created = cls.objects.get_or_create(
            user=word.user,
            word=word,
            card_type='empty',
            defaults={
                'ease_factor': 2.5,
                'is_in_learning_mode': True,
                'is_auxiliary': True,
            }
        )
        return card
    
    @classmethod
    def create_cloze(cls, word: Word, sentence: str, word_index: int = 0) -> 'Card':
        """
        –°–æ–∑–¥–∞—ë—Ç cloze-–∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.
        
        Args:
            word: –°–ª–æ–≤–æ-–∏—Å—Ç–æ—á–Ω–∏–∫
            sentence: –ü–æ–ª–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
            word_index: –ò–Ω–¥–µ–∫—Å —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ (0-based)
        
        Returns:
            –°–æ–∑–¥–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞
        """
        if not sentence:
            raise ValueError("–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
        
        card, created = cls.objects.get_or_create(
            user=word.user,
            word=word,
            card_type='cloze',
            cloze_sentence=sentence,
            defaults={
                'cloze_word_index': word_index,
                'ease_factor': 2.5,
                'is_in_learning_mode': True,
                'is_auxiliary': True,
            }
        )
        return card
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –ú–ï–¢–û–î–´ –°–û–°–¢–û–Ø–ù–ò–Ø
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    def suspend(self) -> None:
        """–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É"""
        self.is_suspended = True
        self.save(update_fields=['is_suspended', 'updated_at'])
    
    def unsuspend(self) -> None:
        """–í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É"""
        self.is_suspended = False
        self.save(update_fields=['is_suspended', 'updated_at'])
    
    def burn(self) -> None:
        """
        "–°–∂–µ—á—å" –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É.
        –ü–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ suspended –∏ is_auxiliary=True.
        –ù–µ —É–¥–∞–ª—è–µ—Ç ‚Äî –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.
        """
        if not self.is_auxiliary:
            raise ValueError("–¢–æ–ª—å–∫–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∂–∂–µ–Ω—ã")
        self.is_suspended = True
        self.save(update_fields=['is_suspended', 'updated_at'])
    
    def restore(self) -> None:
        """
        –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–∂–∂—ë–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É.
        –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç –≤ —Ä–µ–∂–∏–º –∏–∑—É—á–µ–Ω–∏—è.
        """
        self.is_suspended = False
        self.is_in_learning_mode = True
        self.learning_step = 0
        self.consecutive_lapses = 0
        self.save(update_fields=[
            'is_suspended', 'is_in_learning_mode', 
            'learning_step', 'consecutive_lapses', 'updated_at'
        ])
    
    def enter_learning_mode(self) -> None:
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≤ —Ä–µ–∂–∏–º –ò–∑—É—á–µ–Ω–∏—è"""
        self.is_in_learning_mode = True
        self.learning_step = 0
        self.consecutive_lapses = 0
        self.save(update_fields=[
            'is_in_learning_mode', 'learning_step', 
            'consecutive_lapses', 'updated_at'
        ])
    
    def exit_learning_mode(self) -> None:
        """–í—ã–≤–µ—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É –∏–∑ —Ä–µ–∂–∏–º–∞ –ò–∑—É—á–µ–Ω–∏—è"""
        self.is_in_learning_mode = False
        self.save(update_fields=['is_in_learning_mode', 'updated_at'])
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –ú–ï–¢–û–î–´ –ö–û–ù–¢–ï–ù–¢–ê
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    def get_front_content(self) -> dict:
        """
        –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –ª–∏—Ü–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏.
        
        Returns:
            dict —Å –∫–ª—é—á–∞–º–∏: text, image_url, audio_url
        """
        word = self.word
        
        if self.card_type == 'normal':
            return {
                'text': word.original_word,
                'image_url': word.image_file.url if word.image_file else None,
                'audio_url': word.audio_file.url if word.audio_file else None,
            }
        
        elif self.card_type == 'inverted':
            return {
                'text': word.translation,
                'image_url': None,
                'audio_url': None,
            }
        
        elif self.card_type == 'empty':
            return {
                'text': None,
                'image_url': word.image_file.url if word.image_file else None,
                'audio_url': word.audio_file.url if word.audio_file else None,
            }
        
        elif self.card_type == 'cloze':
            # –ó–∞–º–µ–Ω—è–µ–º —Å–ª–æ–≤–æ –Ω–∞ [...]
            sentence_with_gap = self._create_cloze_text()
            return {
                'text': sentence_with_gap,
                'image_url': word.image_file.url if word.image_file else None,
                'audio_url': None,
            }
        
        return {'text': None, 'image_url': None, 'audio_url': None}
    
    def get_back_content(self) -> dict:
        """
        –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±–æ—Ä–æ—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–∞—Ä—Ç–æ—á–∫–∏.
        
        Returns:
            dict —Å –∫–ª—é—á–∞–º–∏: text, translation, image_url, audio_url
        """
        word = self.word
        
        if self.card_type == 'normal':
            return {
                'text': word.translation,
                'translation': None,
                'image_url': None,
                'audio_url': None,
            }
        
        elif self.card_type == 'inverted':
            return {
                'text': word.original_word,
                'translation': word.translation,
                'image_url': word.image_file.url if word.image_file else None,
                'audio_url': word.audio_file.url if word.audio_file else None,
            }
        
        elif self.card_type == 'empty':
            return {
                'text': word.original_word,
                'translation': word.translation,
                'image_url': None,
                'audio_url': word.audio_file.url if word.audio_file else None,
            }
        
        elif self.card_type == 'cloze':
            return {
                'text': word.original_word,
                'translation': word.translation,
                'image_url': None,
                'audio_url': word.audio_file.url if word.audio_file else None,
            }
        
        return {'text': None, 'translation': None, 'image_url': None, 'audio_url': None}
    
    def _create_cloze_text(self) -> str:
        """
        –°–æ–∑–¥–∞—ë—Ç —Ç–µ–∫—Å—Ç —Å –ø—Ä–æ–ø—É—Å–∫–æ–º –¥–ª—è cloze-–∫–∞—Ä—Ç–æ—á–∫–∏.
        
        –ó–∞–º–µ–Ω—è–µ—Ç —Å–ª–æ–≤–æ –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ cloze_word_index –Ω–∞ [...]
        """
        if not self.cloze_sentence:
            return "[...]"
        
        words = self.cloze_sentence.split()
        if 0 <= self.cloze_word_index < len(words):
            words[self.cloze_word_index] = "[...]"
        return " ".join(words)
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    def is_due(self) -> bool:
        """–ö–∞—Ä—Ç–æ—á–∫–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è?"""
        if self.is_suspended:
            return False
        if self.is_in_learning_mode:
            return True  # –ù–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã
        if self.next_review is None:
            return True
        return self.next_review <= timezone.now()
    
    def get_siblings(self):
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≥–æ –∂–µ —Å–ª–æ–≤–∞"""
        return Card.objects.filter(word=self.word).exclude(pk=self.pk)
    
    def can_be_burned(self, stability_threshold: int = 60) -> bool:
        """
        –ú–æ–∂–Ω–æ –ª–∏ —Å–∂–µ—á—å —ç—Ç—É –∫–∞—Ä—Ç–æ—á–∫—É?
        
        –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–≥–æ—Ä–∞—é—Ç –∫–æ–≥–¥–∞:
        - –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (normal) –¥–æ—Å—Ç–∏–≥–ª–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
        """
        if not self.is_auxiliary:
            return False
        
        # –ò—â–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —ç—Ç–æ–≥–æ —Å–ª–æ–≤–∞
        normal_card = Card.objects.filter(
            word=self.word,
            card_type='normal',
            is_suspended=False
        ).first()
        
        if not normal_card:
            return False
        
        return normal_card.interval >= stability_threshold
```

---

### 2. –°–∏–≥–Ω–∞–ª –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏

**–§–∞–π–ª**: `backend/apps/cards/signals.py`

```python
from django.db.models.signals import post_save
from django.dispatch import receiver
from apps.words.models import Word
from .models import Card


@receiver(post_save, sender=Word)
def create_card_for_new_word(sender, instance, created, **kwargs):
    """
    –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë–º normal-–∫–∞—Ä—Ç–æ—á–∫—É.
    
    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –∏–º–µ–µ—Ç —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É
    –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è.
    """
    if created:
        Card.create_from_word(instance, 'normal')
```

---

### 3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤

**–§–∞–π–ª**: `backend/apps/cards/apps.py`

```python
from django.apps import AppConfig


class CardsConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'apps.cards'
    verbose_name = '–ö–∞—Ä—Ç–æ—á–∫–∏'

    def ready(self):
        # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        import apps.cards.signals  # noqa: F401
```

---

### 4. –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã

**–§–∞–π–ª**: `backend/apps/cards/serializers.py`

```python
from rest_framework import serializers
from .models import Card
from apps.words.serializers import WordListSerializer


class CardSerializer(serializers.ModelSerializer):
    """–ü–æ–ª–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏"""
    
    word = WordListSerializer(read_only=True)
    front_content = serializers.SerializerMethodField()
    back_content = serializers.SerializerMethodField()
    is_due = serializers.SerializerMethodField()
    
    class Meta:
        model = Card
        fields = [
            'id',
            'word',
            'card_type',
            'cloze_sentence',
            'cloze_word_index',
            # SM-2
            'ease_factor',
            'interval',
            'repetitions',
            'lapses',
            'consecutive_lapses',
            'learning_step',
            # –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
            'next_review',
            'last_review',
            # –°—Ç–∞—Ç—É—Å—ã
            'is_in_learning_mode',
            'is_auxiliary',
            'is_suspended',
            # –ö–æ–Ω—Ç–µ–Ω—Ç
            'front_content',
            'back_content',
            'is_due',
            # –ú–µ—Ç–∞
            'created_at',
            'updated_at',
        ]
        read_only_fields = [
            'id', 'word', 'ease_factor', 'interval', 'repetitions',
            'lapses', 'consecutive_lapses', 'learning_step',
            'next_review', 'last_review', 'is_auxiliary',
            'created_at', 'updated_at',
        ]
    
    def get_front_content(self, obj) -> dict:
        return obj.get_front_content()
    
    def get_back_content(self, obj) -> dict:
        return obj.get_back_content()
    
    def get_is_due(self, obj) -> bool:
        return obj.is_due()


class CardListSerializer(serializers.ModelSerializer):
    """–°–æ–∫—Ä–∞—â—ë–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Å–ø–∏—Å–∫–æ–≤"""
    
    word_text = serializers.CharField(source='word.original_word', read_only=True)
    word_translation = serializers.CharField(source='word.translation', read_only=True)
    is_due = serializers.SerializerMethodField()
    
    class Meta:
        model = Card
        fields = [
            'id',
            'card_type',
            'word_text',
            'word_translation',
            'interval',
            'ease_factor',
            'next_review',
            'is_in_learning_mode',
            'is_auxiliary',
            'is_suspended',
            'is_due',
        ]
    
    def get_is_due(self, obj) -> bool:
        return obj.is_due()


class CardCreateInvertedSerializer(serializers.Serializer):
    """–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏"""
    
    word_id = serializers.IntegerField(required=False, help_text="ID —Å–ª–æ–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –≤ URL)")
    
    def validate_word_id(self, value):
        from apps.words.models import Word
        
        user = self.context['request'].user
        try:
            Word.objects.get(id=value, user=user)
        except Word.DoesNotExist:
            raise serializers.ValidationError("–°–ª–æ–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
        return value


class CardCreateEmptySerializer(serializers.Serializer):
    """–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—É—Å—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏"""
    pass  # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ view


class CardCreateClozeSerializer(serializers.Serializer):
    """–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è cloze-–∫–∞—Ä—Ç–æ—á–∫–∏"""
    
    sentence = serializers.CharField(
        required=True,
        help_text="–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —Ü–µ–ª–µ–≤—ã–º —Å–ª–æ–≤–æ–º"
    )
    word_index = serializers.IntegerField(
        required=False,
        default=0,
        help_text="–ò–Ω–¥–µ–∫—Å —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ (0-based)"
    )
    
    def validate_sentence(self, value):
        if not value or not value.strip():
            raise serializers.ValidationError("–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
        return value.strip()
    
    def validate(self, data):
        sentence = data.get('sentence', '')
        word_index = data.get('word_index', 0)
        
        words = sentence.split()
        if word_index < 0 or word_index >= len(words):
            raise serializers.ValidationError({
                'word_index': f"–ò–Ω–¥–µ–∫—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç 0 –¥–æ {len(words) - 1}"
            })
        
        return data


class CardReviewSerializer(serializers.ModelSerializer):
    """
    –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ.
    –°–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è.
    """
    
    front_content = serializers.SerializerMethodField()
    
    class Meta:
        model = Card
        fields = [
            'id',
            'card_type',
            'front_content',
            'is_in_learning_mode',
        ]
    
    def get_front_content(self, obj) -> dict:
        return obj.get_front_content()


class CardAnswerSerializer(serializers.ModelSerializer):
    """
    –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–ª—è –æ—Ç–≤–µ—Ç–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–æ—Ä–æ—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É.
    """
    
    front_content = serializers.SerializerMethodField()
    back_content = serializers.SerializerMethodField()
    word_etymology = serializers.CharField(source='word.etymology', read_only=True)
    word_notes = serializers.CharField(source='word.notes', read_only=True)
    word_hint_text = serializers.CharField(source='word.hint_text', read_only=True)
    word_sentences = serializers.JSONField(source='word.sentences', read_only=True)
    
    class Meta:
        model = Card
        fields = [
            'id',
            'card_type',
            'front_content',
            'back_content',
            'is_in_learning_mode',
            'word_etymology',
            'word_notes',
            'word_hint_text',
            'word_sentences',
        ]
    
    def get_front_content(self, obj) -> dict:
        return obj.get_front_content()
    
    def get_back_content(self, obj) -> dict:
        return obj.get_back_content()
```

---

### 5. Views

**–§–∞–π–ª**: `backend/apps/cards/views.py`

```python
from rest_framework.decorators import api_view, permission_classes
from rest_framework.permissions import IsAuthenticated
from rest_framework.response import Response
from rest_framework import status
from django.shortcuts import get_object_or_404

from .models import Card
from .serializers import (
    CardSerializer,
    CardListSerializer,
    CardCreateClozeSerializer,
)
from apps.words.models import Word


@api_view(['GET'])
@permission_classes([IsAuthenticated])
def card_list_view(request):
    """
    GET /api/cards/ ‚Äî –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    
    Query params:
        - type: —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (normal, inverted, empty, cloze)
        - learning: true/false ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è
        - suspended: true/false ‚Äî –≤–∫–ª—é—á–∞—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
        - word_id: —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å–ª–æ–≤—É
    """
    user = request.user
    cards = Card.objects.filter(user=user)
    
    # –§–∏–ª—å—Ç—Ä—ã
    card_type = request.query_params.get('type')
    if card_type:
        cards = cards.filter(card_type=card_type)
    
    learning = request.query_params.get('learning')
    if learning == 'true':
        cards = cards.filter(is_in_learning_mode=True)
    elif learning == 'false':
        cards = cards.filter(is_in_learning_mode=False)
    
    suspended = request.query_params.get('suspended')
    if suspended != 'true':
        cards = cards.filter(is_suspended=False)
    
    word_id = request.query_params.get('word_id')
    if word_id:
        cards = cards.filter(word_id=word_id)
    
    serializer = CardListSerializer(cards, many=True)
    return Response(serializer.data)


@api_view(['GET', 'DELETE'])
@permission_classes([IsAuthenticated])
def card_detail_view(request, card_id):
    """
    GET /api/cards/{id}/ ‚Äî –î–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
    DELETE /api/cards/{id}/ ‚Äî –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
    """
    card = get_object_or_404(Card, id=card_id, user=request.user)
    
    if request.method == 'GET':
        serializer = CardSerializer(card)
        return Response(serializer.data)
    
    elif request.method == 'DELETE':
        # –ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É, –µ—Å–ª–∏ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è
        if card.card_type == 'normal':
            other_cards = Card.objects.filter(word=card.word).exclude(id=card.id).count()
            if other_cards == 0:
                return Response(
                    {'error': '–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å–ª–æ–≤–∞'},
                    status=status.HTTP_400_BAD_REQUEST
                )
        
        card.delete()
        return Response(status=status.HTTP_204_NO_CONTENT)


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_create_inverted_view(request, word_id):
    """
    POST /api/words/{word_id}/cards/inverted/ ‚Äî –°–æ–∑–¥–∞—Ç—å –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    """
    word = get_object_or_404(Word, id=word_id, user=request.user)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π
    if Card.objects.filter(word=word, card_type='inverted').exists():
        return Response(
            {'error': '–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    card = Card.create_inverted(word)
    serializer = CardSerializer(card)
    return Response(serializer.data, status=status.HTTP_201_CREATED)


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_create_empty_view(request, word_id):
    """
    POST /api/words/{word_id}/cards/empty/ ‚Äî –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é –∫–∞—Ä—Ç–æ—á–∫—É
    """
    word = get_object_or_404(Word, id=word_id, user=request.user)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–µ–¥–∏–∞
    if not word.image_file and not word.audio_file:
        return Response(
            {'error': '–î–ª—è empty-–∫–∞—Ä—Ç–æ—á–∫–∏ –Ω—É–∂–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –∞—É–¥–∏–æ'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ –ø—É—Å—Ç–æ–π
    if Card.objects.filter(word=word, card_type='empty').exists():
        return Response(
            {'error': '–ü—É—Å—Ç–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    card = Card.create_empty(word)
    serializer = CardSerializer(card)
    return Response(serializer.data, status=status.HTTP_201_CREATED)


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_create_cloze_view(request, word_id):
    """
    POST /api/words/{word_id}/cards/cloze/ ‚Äî –°–æ–∑–¥–∞—Ç—å cloze-–∫–∞—Ä—Ç–æ—á–∫—É
    
    Body:
        - sentence: str ‚Äî –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å —Ü–µ–ª–µ–≤—ã–º —Å–ª–æ–≤–æ–º
        - word_index: int ‚Äî –ò–Ω–¥–µ–∫—Å —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ (0-based)
    """
    word = get_object_or_404(Word, id=word_id, user=request.user)
    
    serializer = CardCreateClozeSerializer(data=request.data, context={'request': request})
    if not serializer.is_valid():
        return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)
    
    sentence = serializer.validated_data['sentence']
    word_index = serializer.validated_data.get('word_index', 0)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π cloze
    if Card.objects.filter(word=word, card_type='cloze', cloze_sentence=sentence).exists():
        return Response(
            {'error': 'Cloze-–∫–∞—Ä—Ç–æ—á–∫–∞ —Å —ç—Ç–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'},
            status=status.HTTP_400_BAD_REQUEST
        )
    
    card = Card.create_cloze(word, sentence, word_index)
    serializer = CardSerializer(card)
    return Response(serializer.data, status=status.HTTP_201_CREATED)


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_suspend_view(request, card_id):
    """
    POST /api/cards/{id}/suspend/ ‚Äî –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
    """
    card = get_object_or_404(Card, id=card_id, user=request.user)
    card.suspend()
    return Response({'status': 'suspended'})


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_unsuspend_view(request, card_id):
    """
    POST /api/cards/{id}/unsuspend/ ‚Äî –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
    """
    card = get_object_or_404(Card, id=card_id, user=request.user)
    card.unsuspend()
    return Response({'status': 'unsuspended'})


@api_view(['POST'])
@permission_classes([IsAuthenticated])
def card_enter_learning_view(request, card_id):
    """
    POST /api/cards/{id}/enter-learning/ ‚Äî –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–µ–∂–∏–º –ò–∑—É—á–µ–Ω–∏—è
    """
    card = get_object_or_404(Card, id=card_id, user=request.user)
    card.enter_learning_mode()
    return Response({'status': 'in_learning_mode'})


@api_view(['GET'])
@permission_classes([IsAuthenticated])
def word_cards_list_view(request, word_id):
    """
    GET /api/words/{word_id}/cards/ ‚Äî –í—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–≤–∞
    """
    word = get_object_or_404(Word, id=word_id, user=request.user)
    cards = Card.objects.filter(word=word)
    serializer = CardListSerializer(cards, many=True)
    return Response(serializer.data)
```

---

### 6. URL-–º–∞—Ä—à—Ä—É—Ç—ã

**–§–∞–π–ª**: `backend/apps/cards/urls.py` (–æ–±–Ω–æ–≤–∏—Ç—å)

```python
from django.urls import path
from . import views

urlpatterns = [
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã –∫–æ–ª–æ–¥...
    # (–æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å)
    
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    # –ö–ê–†–¢–û–ß–ö–ò (–Ω–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã)
    # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
    
    # –°–ø–∏—Å–æ–∫ –∏ –¥–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
    path('cards/', views.card_list_view, name='card-list'),
    path('cards/<int:card_id>/', views.card_detail_view, name='card-detail'),
    
    # –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏
    path('cards/<int:card_id>/suspend/', views.card_suspend_view, name='card-suspend'),
    path('cards/<int:card_id>/unsuspend/', views.card_unsuspend_view, name='card-unsuspend'),
    path('cards/<int:card_id>/enter-learning/', views.card_enter_learning_view, name='card-enter-learning'),
]

# –û—Ç–¥–µ–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ (—á–µ—Ä–µ–∑ words app)
# –î–æ–±–∞–≤–∏—Ç—å –≤ apps/words/urls.py:
# path('words/<int:word_id>/cards/', views.word_cards_list_view, name='word-cards-list'),
# path('words/<int:word_id>/cards/inverted/', views.card_create_inverted_view, name='card-create-inverted'),
# path('words/<int:word_id>/cards/empty/', views.card_create_empty_view, name='card-create-empty'),
# path('words/<int:word_id>/cards/cloze/', views.card_create_cloze_view, name='card-create-cloze'),
```

---

### 7. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ Admin

**–§–∞–π–ª**: `backend/apps/cards/admin.py`

```python
from django.contrib import admin
from .models import Card


@admin.register(Card)
class CardAdmin(admin.ModelAdmin):
    list_display = [
        'id', 'word', 'card_type', 'user',
        'ease_factor', 'interval', 'next_review',
        'is_in_learning_mode', 'is_auxiliary', 'is_suspended',
    ]
    list_filter = [
        'card_type', 'is_in_learning_mode', 
        'is_auxiliary', 'is_suspended',
    ]
    search_fields = ['word__original_word', 'word__translation']
    readonly_fields = ['created_at', 'updated_at']
    raw_id_fields = ['user', 'word']
    
    fieldsets = (
        ('–û—Å–Ω–æ–≤–Ω–æ–µ', {
            'fields': ('user', 'word', 'card_type')
        }),
        ('Cloze', {
            'fields': ('cloze_sentence', 'cloze_word_index'),
            'classes': ('collapse',),
        }),
        ('SM-2 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã', {
            'fields': (
                'ease_factor', 'interval', 'repetitions',
                'lapses', 'consecutive_lapses', 'learning_step',
            )
        }),
        ('–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ', {
            'fields': ('next_review', 'last_review')
        }),
        ('–°—Ç–∞—Ç—É—Å—ã', {
            'fields': ('is_in_learning_mode', 'is_auxiliary', 'is_suspended')
        }),
        ('–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ', {
            'fields': ('created_at', 'updated_at'),
            'classes': ('collapse',),
        }),
    )
```

---

### 8. TypeScript —Ç–∏–ø—ã

**–§–∞–π–ª**: `frontend/src/types/index.ts` (–¥–æ–±–∞–≤–∏—Ç—å)

```typescript
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CARD TYPES (–≠—Ç–∞–ø 3)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

export type CardType = 'normal' | 'inverted' | 'empty' | 'cloze';

export interface CardContent {
  text: string | null;
  translation?: string | null;
  image_url: string | null;
  audio_url: string | null;
}

export interface Card {
  id: number;
  word: Word;
  card_type: CardType;
  cloze_sentence: string;
  cloze_word_index: number;
  // SM-2
  ease_factor: number;
  interval: number;
  repetitions: number;
  lapses: number;
  consecutive_lapses: number;
  learning_step: number;
  // –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
  next_review: string | null;
  last_review: string | null;
  // –°—Ç–∞—Ç—É—Å—ã
  is_in_learning_mode: boolean;
  is_auxiliary: boolean;
  is_suspended: boolean;
  // –ö–æ–Ω—Ç–µ–Ω—Ç
  front_content: CardContent;
  back_content: CardContent;
  is_due: boolean;
  // –ú–µ—Ç–∞
  created_at: string;
  updated_at: string;
}

export interface CardListItem {
  id: number;
  card_type: CardType;
  word_text: string;
  word_translation: string;
  interval: number;
  ease_factor: number;
  next_review: string | null;
  is_in_learning_mode: boolean;
  is_auxiliary: boolean;
  is_suspended: boolean;
  is_due: boolean;
}

export interface CardCreateClozeRequest {
  sentence: string;
  word_index?: number;
}

export interface CardReview {
  id: number;
  card_type: CardType;
  front_content: CardContent;
  is_in_learning_mode: boolean;
}

export interface CardAnswer {
  id: number;
  card_type: CardType;
  front_content: CardContent;
  back_content: CardContent;
  is_in_learning_mode: boolean;
  word_etymology: string;
  word_notes: string;
  word_hint_text: string;
  word_sentences: Array<{ text: string; source: string }>;
}
```

---

## üß™ –¢–µ—Å—Ç—ã

### Unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–∏ Card

**–§–∞–π–ª**: `backend/apps/cards/tests.py`

```python
from django.test import TestCase
from django.contrib.auth import get_user_model
from django.core.files.uploadedfile import SimpleUploadedFile
from django.utils import timezone
from datetime import timedelta
from rest_framework.test import APITestCase
from rest_framework import status

from apps.words.models import Word
from apps.cards.models import Card

User = get_user_model()


class TestCardModel(TestCase):
    """Unit-—Ç–µ—Å—Ç—ã –º–æ–¥–µ–ª–∏ Card"""
    
    def setUp(self):
        self.user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
        self.word = Word.objects.create(
            user=self.user,
            original_word='Hund',
            translation='—Å–æ–±–∞–∫–∞',
            language='de'
        )
    
    def test_create_normal_card(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ã—á–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏"""
        card = Card.create_from_word(self.word, 'normal')
        
        self.assertEqual(card.card_type, 'normal')
        self.assertEqual(card.word, self.word)
        self.assertEqual(card.user, self.user)
        self.assertEqual(card.ease_factor, 2.5)
        self.assertTrue(card.is_in_learning_mode)
        self.assertFalse(card.is_auxiliary)
        self.assertFalse(card.is_suspended)
    
    def test_create_inverted_card(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏"""
        card = Card.create_inverted(self.word)
        
        self.assertEqual(card.card_type, 'inverted')
        self.assertFalse(card.is_auxiliary)
    
    def test_create_empty_card_without_media_fails(self):
        """–¢–µ—Å—Ç: empty-–∫–∞—Ä—Ç–æ—á–∫–∞ —Ç—Ä–µ–±—É–µ—Ç –º–µ–¥–∏–∞"""
        with self.assertRaises(ValueError) as context:
            Card.create_empty(self.word)
        
        self.assertIn('–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ –∞—É–¥–∏–æ', str(context.exception))
    
    def test_create_empty_card_with_image(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è empty-–∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"""
        image = SimpleUploadedFile(
            name='test.jpg',
            content=b'\x89PNG\r\n\x1a\n',
            content_type='image/jpeg'
        )
        self.word.image_file = image
        self.word.save()
        
        card = Card.create_empty(self.word)
        
        self.assertEqual(card.card_type, 'empty')
        self.assertTrue(card.is_auxiliary)
    
    def test_create_cloze_card(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è cloze-–∫–∞—Ä—Ç–æ—á–∫–∏"""
        sentence = "Der Hund ist gro√ü"
        card = Card.create_cloze(self.word, sentence, word_index=1)
        
        self.assertEqual(card.card_type, 'cloze')
        self.assertEqual(card.cloze_sentence, sentence)
        self.assertEqual(card.cloze_word_index, 1)
        self.assertTrue(card.is_auxiliary)
    
    def test_create_cloze_without_sentence_fails(self):
        """–¢–µ—Å—Ç: cloze —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ"""
        with self.assertRaises(ValueError):
            Card.create_cloze(self.word, '', 0)
    
    def test_suspend_and_unsuspend(self):
        """–¢–µ—Å—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"""
        card = Card.create_from_word(self.word)
        
        card.suspend()
        self.assertTrue(card.is_suspended)
        
        card.unsuspend()
        self.assertFalse(card.is_suspended)
    
    def test_enter_and_exit_learning_mode(self):
        """–¢–µ—Å—Ç –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –∏–∑ —Ä–µ–∂–∏–º–∞ –∏–∑—É—á–µ–Ω–∏—è"""
        card = Card.create_from_word(self.word)
        card.is_in_learning_mode = False
        card.save()
        
        card.enter_learning_mode()
        self.assertTrue(card.is_in_learning_mode)
        self.assertEqual(card.learning_step, 0)
        
        card.exit_learning_mode()
        self.assertFalse(card.is_in_learning_mode)
    
    def test_get_front_content_normal(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏—Ü–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã normal"""
        card = Card.create_from_word(self.word)
        front = card.get_front_content()
        
        self.assertEqual(front['text'], 'Hund')
        self.assertIsNone(front['image_url'])
        self.assertIsNone(front['audio_url'])
    
    def test_get_front_content_inverted(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏—Ü–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã inverted"""
        card = Card.create_inverted(self.word)
        front = card.get_front_content()
        
        self.assertEqual(front['text'], '—Å–æ–±–∞–∫–∞')
    
    def test_get_back_content_normal(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–æ—Ä–æ—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã normal"""
        card = Card.create_from_word(self.word)
        back = card.get_back_content()
        
        self.assertEqual(back['text'], '—Å–æ–±–∞–∫–∞')
    
    def test_cloze_text_creation(self):
        """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –ø—Ä–æ–ø—É—Å–∫–æ–º"""
        sentence = "Der Hund ist gro√ü"
        card = Card.create_cloze(self.word, sentence, word_index=1)
        
        cloze_text = card._create_cloze_text()
        self.assertEqual(cloze_text, "Der [...] ist gro√ü")
    
    def test_is_due_new_card(self):
        """–¢–µ—Å—Ç: –Ω–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞"""
        card = Card.create_from_word(self.word)
        self.assertTrue(card.is_due())
    
    def test_is_due_suspended_card(self):
        """–¢–µ—Å—Ç: –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ –≥–æ—Ç–æ–≤–∞"""
        card = Card.create_from_word(self.word)
        card.suspend()
        self.assertFalse(card.is_due())
    
    def test_is_due_future_review(self):
        """–¢–µ—Å—Ç: –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –±—É–¥—É—â–∏–º next_review –Ω–µ –≥–æ—Ç–æ–≤–∞"""
        card = Card.create_from_word(self.word)
        card.is_in_learning_mode = False
        card.next_review = timezone.now() + timedelta(days=1)
        card.save()
        
        self.assertFalse(card.is_due())
    
    def test_is_due_past_review(self):
        """–¢–µ—Å—Ç: –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –ø—Ä–æ—à–µ–¥—à–∏–º next_review –≥–æ—Ç–æ–≤–∞"""
        card = Card.create_from_word(self.word)
        card.is_in_learning_mode = False
        card.next_review = timezone.now() - timedelta(hours=1)
        card.save()
        
        self.assertTrue(card.is_due())


class TestCardManager(TestCase):
    """–¢–µ—Å—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä–∞ CardManager"""
    
    def setUp(self):
        self.user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
        self.word1 = Word.objects.create(
            user=self.user,
            original_word='Hund',
            translation='—Å–æ–±–∞–∫–∞',
            language='de'
        )
        self.word2 = Word.objects.create(
            user=self.user,
            original_word='Katze',
            translation='–∫–æ—à–∫–∞',
            language='de'
        )
    
    def test_for_user(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        card1 = Card.create_from_word(self.word1)
        card2 = Card.create_from_word(self.word2)
        card2.suspend()
        
        cards = Card.objects.for_user(self.user)
        self.assertEqual(cards.count(), 1)  # –¢–æ–ª—å–∫–æ –Ω–µ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ
    
    def test_due_for_review(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è"""
        card = Card.create_from_word(self.word1)
        card.is_in_learning_mode = False
        card.next_review = timezone.now() - timedelta(hours=1)
        card.save()
        
        due = Card.objects.due_for_review(self.user)
        self.assertEqual(due.count(), 1)
    
    def test_in_learning(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ —Ä–µ–∂–∏–º–µ –∏–∑—É—á–µ–Ω–∏—è"""
        card1 = Card.create_from_word(self.word1)
        card2 = Card.create_from_word(self.word2)
        card2.is_in_learning_mode = False
        card2.save()
        
        learning = Card.objects.in_learning(self.user)
        self.assertEqual(learning.count(), 1)
    
    def test_by_word(self):
        """–¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ —Å–ª–æ–≤—É"""
        Card.create_from_word(self.word1)
        Card.create_inverted(self.word1)
        Card.create_from_word(self.word2)
        
        cards = Card.objects.by_word(self.word1)
        self.assertEqual(cards.count(), 2)


class TestCardSignals(TestCase):
    """–¢–µ—Å—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤ –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è"""
    
    def setUp(self):
        self.user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
    
    def test_auto_create_card_on_word_creation(self):
        """–¢–µ—Å—Ç: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ª–æ–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞"""
        word = Word.objects.create(
            user=self.user,
            original_word='Auto',
            translation='–º–∞—à–∏–Ω–∞',
            language='de'
        )
        
        cards = Card.objects.filter(word=word)
        self.assertEqual(cards.count(), 1)
        self.assertEqual(cards.first().card_type, 'normal')


class TestCardAPI(APITestCase):
    """API-—Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫"""
    
    def setUp(self):
        self.user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
        self.client.force_authenticate(user=self.user)
        
        self.word = Word.objects.create(
            user=self.user,
            original_word='Haus',
            translation='–¥–æ–º',
            language='de'
        )
        # –£–¥–∞–ª—è–µ–º –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è —á–∏—Å—Ç—ã—Ö —Ç–µ—Å—Ç–æ–≤
        Card.objects.filter(word=self.word).delete()
    
    def test_list_cards(self):
        """GET /api/cards/ ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫"""
        Card.create_from_word(self.word)
        
        response = self.client.get('/api/cards/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(len(response.data), 1)
    
    def test_card_detail(self):
        """GET /api/cards/{id}/ ‚Äî –¥–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏"""
        card = Card.create_from_word(self.word)
        
        response = self.client.get(f'/api/cards/{card.id}/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(response.data['card_type'], 'normal')
        self.assertIn('front_content', response.data)
        self.assertIn('back_content', response.data)
    
    def test_create_inverted_card(self):
        """POST /api/words/{id}/cards/inverted/"""
        response = self.client.post(f'/api/words/{self.word.id}/cards/inverted/')
        
        self.assertEqual(response.status_code, status.HTTP_201_CREATED)
        self.assertEqual(response.data['card_type'], 'inverted')
    
    def test_create_cloze_card(self):
        """POST /api/words/{id}/cards/cloze/"""
        data = {
            'sentence': 'Das Haus ist gro√ü',
            'word_index': 1
        }
        
        response = self.client.post(
            f'/api/words/{self.word.id}/cards/cloze/',
            data
        )
        
        self.assertEqual(response.status_code, status.HTTP_201_CREATED)
        self.assertEqual(response.data['card_type'], 'cloze')
        self.assertEqual(response.data['cloze_sentence'], 'Das Haus ist gro√ü')
    
    def test_suspend_card(self):
        """POST /api/cards/{id}/suspend/"""
        card = Card.create_from_word(self.word)
        
        response = self.client.post(f'/api/cards/{card.id}/suspend/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        card.refresh_from_db()
        self.assertTrue(card.is_suspended)
    
    def test_unsuspend_card(self):
        """POST /api/cards/{id}/unsuspend/"""
        card = Card.create_from_word(self.word)
        card.suspend()
        
        response = self.client.post(f'/api/cards/{card.id}/unsuspend/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        card.refresh_from_db()
        self.assertFalse(card.is_suspended)
    
    def test_delete_auxiliary_card(self):
        """DELETE /api/cards/{id}/ ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–π"""
        self.word.sentences = [{'text': 'Das Haus ist gro√ü', 'source': 'user'}]
        self.word.save()
        card = Card.create_cloze(self.word, 'Das Haus ist gro√ü', 1)
        
        response = self.client.delete(f'/api/cards/{card.id}/')
        
        self.assertEqual(response.status_code, status.HTTP_204_NO_CONTENT)
    
    def test_cannot_delete_only_normal_card(self):
        """DELETE /api/cards/{id}/ ‚Äî –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é normal"""
        card = Card.create_from_word(self.word)
        
        response = self.client.delete(f'/api/cards/{card.id}/')
        
        self.assertEqual(response.status_code, status.HTTP_400_BAD_REQUEST)
    
    def test_enter_learning_mode(self):
        """POST /api/cards/{id}/enter-learning/"""
        card = Card.create_from_word(self.word)
        card.is_in_learning_mode = False
        card.save()
        
        response = self.client.post(f'/api/cards/{card.id}/enter-learning/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        card.refresh_from_db()
        self.assertTrue(card.is_in_learning_mode)
    
    def test_word_cards_list(self):
        """GET /api/words/{id}/cards/ ‚Äî –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ª–æ–≤–∞"""
        Card.create_from_word(self.word)
        Card.create_inverted(self.word)
        
        response = self.client.get(f'/api/words/{self.word.id}/cards/')
        
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertEqual(len(response.data), 2)
```

---

## ‚úÖ Definition of Done

- [ ] –ú–æ–¥–µ–ª—å `Card` —Å–æ–∑–¥–∞–Ω–∞ —Å –ø–æ–ª—è–º–∏ SM-2
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- [ ] –§–∞–±—Ä–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç: `create_from_word`, `create_inverted`, `create_empty`, `create_cloze`
- [ ] `CardManager` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –º–µ—Ç–æ–¥–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- [ ] –°–∏–≥–Ω–∞–ª –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–ª–æ–≤–∞
- [ ] –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ Django Admin
- [ ] TypeScript —Ç–∏–ø—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (30+ —Ç–µ—Å—Ç–æ–≤)
- [ ] `python manage.py check` –±–µ–∑ –æ—à–∏–±–æ–∫

---

## üîß –ö–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
cd backend && python3 manage.py makemigrations cards

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏  
python3 manage.py migrate

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π
python3 manage.py check

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python3 -m pytest apps/cards/tests.py -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è
python3 -m pytest apps/cards/tests.py -v --cov=apps.cards --cov-report=term-missing
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü–æ—á–µ–º—É Card –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç Word?

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: Word = –∑–Ω–∞–Ω–∏–µ, Card = —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞
2. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏**: –æ–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å 4+ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å**: –∫–∞–∂–¥–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∂–∏–≤—ë—Ç –≤ SM-2 –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
4. **–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏**: empty/cloze –º–æ–≥—É—Ç "—Å–≥–æ—Ä–µ—Ç—å", –Ω–æ —Å–ª–æ–≤–æ –æ—Å—Ç–∞—ë—Ç—Å—è

### unique_together –¥–ª—è Card

```python
unique_together = [['word', 'card_type', 'cloze_sentence']]
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –û–¥–Ω—É `normal` –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ —Å–ª–æ–≤–æ
- –û–¥–Ω—É `inverted` –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ —Å–ª–æ–≤–æ  
- –û–¥–Ω—É `empty` –∫–∞—Ä—Ç–æ—á–∫—É –Ω–∞ —Å–ª–æ–≤–æ
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ `cloze` –∫–∞—Ä—Ç–æ—á–µ–∫ —Å **—Ä–∞–∑–Ω—ã–º–∏** –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UserTrainingSettings

–ú–æ–¥–µ–ª—å `Card` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (ease_factor=2.5, learning_steps=[2,10]).
–í –≠—Ç–∞–ø–µ 4 (UserTrainingSettings) –Ω–∞—á–∞–ª—å–Ω—ã–π ease_factor –±—É–¥–µ—Ç –±—Ä–∞—Ç—å—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
