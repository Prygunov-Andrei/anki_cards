# –í—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:** 5 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å Backend:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–°—Ç–∞—Ç—É—Å Frontend:** üî¥ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

---

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- **OpenAI DALL-E 3** ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), —Å—Ç–æ–∏–º–æ—Å—Ç—å: 1 —Ç–æ–∫–µ–Ω
- **Google Gemini** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å –¥–≤—É–º—è –º–æ–¥–µ–ª—è–º–∏:
  - **Gemini Flash (gemini-2.5-flash-image)** ‚Äî –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å (~4.7 —Å–µ–∫), —Å—Ç–æ–∏–º–æ—Å—Ç—å: **0.5 —Ç–æ–∫–µ–Ω–∞**
  - **Nano Banana Pro (nano-banana-pro-preview)** ‚Äî –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å (~12.6 —Å–µ–∫), —Å—Ç–æ–∏–º–æ—Å—Ç—å: **1 —Ç–æ–∫–µ–Ω**

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –º–æ–¥–µ–ª—å:
1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ—Ñ–∏–ª—è (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ)
2. –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è)

---

## Backend API

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π endpoint –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```
POST /api/media/generate-image/
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "word": "casa",
  "translation": "–¥–æ–º",
  "language": "pt",
  "image_style": "balanced",
  "provider": "gemini",  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: 'openai' | 'gemini'
  "gemini_model": "gemini-2.5-flash-image",  // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: 'gemini-2.5-flash-image' | 'nano-banana-pro-preview'
  "word_id": 123         // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ï—Å–ª–∏ `provider` —É–∫–∞–∑–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
- –ï—Å–ª–∏ `provider` –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `user.image_provider` –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ –ø—Ä–æ—Ñ–∏–ª–µ) ‚Äî `'openai'`

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π endpoint –ø—Ä–æ—Ñ–∏–ª—è

```
PATCH /api/user/profile/
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "image_provider": "gemini",  // 'openai' | 'gemini'
  "gemini_model": "gemini-2.5-flash-image"  // 'gemini-2.5-flash-image' | 'nano-banana-pro-preview'
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 1,
  "username": "user",
  "email": "user@example.com",
  "image_provider": "gemini",
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
}
```

---

## Frontend –ó–∞–¥–∞–Ω–∏–µ

–°–º. [–≠—Ç–∞–ø 12.1 –≤ FRONTEND_TASKS.md](./FRONTEND_TASKS.md#—ç—Ç–∞–ø-121-–≤—ã–±–æ—Ä-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–æ–¥–µ–ª—å User

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è:
```python
image_provider = models.CharField(
    max_length=20,
    choices=[('openai', 'OpenAI DALL-E 3'), ('gemini', 'Google Gemini')],
    default='openai'
)

gemini_model = models.CharField(
    max_length=50,
    choices=[
        ('gemini-2.5-flash-image', 'Gemini Flash (–±—ã—Å—Ç—Ä–∞—è, 0.5 —Ç–æ–∫–µ–Ω–∞)'),
        ('nano-banana-pro-preview', 'Nano Banana Pro (–Ω–æ–≤–∞—è, 1 —Ç–æ–∫–µ–Ω)')
    ],
    default='gemini-2.5-flash-image'
)
```

### –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `generate_image()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä:
1. –ò–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `provider` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
2. –ò–∑ `user.image_provider` (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö)
3. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `'openai'`

### Gemini API

- **–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:**
  - `gemini-2.5-flash-image` ‚Äî –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å (~4.7 —Å–µ–∫), 0.5 —Ç–æ–∫–µ–Ω–∞
  - `nano-banana-pro-preview` ‚Äî –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å (~12.6 —Å–µ–∫), 1 —Ç–æ–∫–µ–Ω
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ `inline_data.data` (–±–∞–π—Ç—ã)
- –§–æ—Ä–º–∞—Ç: JPEG
- –†–∞–∑–º–µ—Ä: ~180-1000 KB

### –°–∏—Å—Ç–µ–º–∞ —Ç–æ–∫–µ–Ω–æ–≤

- –ë–∞–ª–∞–Ω—Å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –∫–∞–∫ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç: 2 –µ–¥–∏–Ω–∏—Ü—ã = 1 —Ç–æ–∫–µ–Ω)
- –ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: `–±–∞–ª–∞–Ω—Å / 2.0`
- –ü—Ä–∏ —Å–ø–∏—Å–∞–Ω–∏–∏: `—Å—Ç–æ–∏–º–æ—Å—Ç—å * 2` (0.5 —Ç–æ–∫–µ–Ω–∞ = 1 –µ–¥–∏–Ω–∏—Ü–∞, 1 —Ç–æ–∫–µ–Ω = 2 –µ–¥–∏–Ω–∏—Ü—ã)
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `{"balance": 5.5}`

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ OpenAI DALL-E 3
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Google Gemini
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –≤ –ø—Ä–æ—Ñ–∏–ª–µ

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã Gemini API —Ç—Ä–µ–±—É–µ—Ç—Å—è:
```bash
GEMINI_API_KEY=your_gemini_api_key_here
```

–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á: https://ai.google.dev/

