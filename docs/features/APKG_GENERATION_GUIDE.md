# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è .apkg —Ñ–∞–π–ª–æ–≤

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—Ä–æ–Ω—Ç–µ–Ω–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç .apkg —Ñ–∞–π–ª—ã —Ä–∞–∑–º–µ—Ä–æ–º 50-60 KB –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º—ã—Ö 8-9 MB. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ) –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ .apkg**.

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å **—É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** –≤ —Å–ª–æ–≤–∞—Ö –∫–æ–ª–æ–¥—ã –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π .apkg. –ë—ç–∫–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –∏–∑ —Å–ª–æ–≤ –∫–æ–ª–æ–¥—ã, –Ω–æ –µ—Å–ª–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Å–ª–æ–≤–∞—Ö, –æ–Ω–∏ –Ω–µ –ø–æ–ø–∞–¥—É—Ç –≤ .apkg.

---

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ .apkg

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è .apkg –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–æ–¥—ã

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç, –∫–æ–≥–¥–∞:**
- –ö–æ–ª–æ–¥–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ "–ú–æ–∏ –∫–æ–ª–æ–¥—ã"
- –°–ª–æ–≤–∞ –≤ –∫–æ–ª–æ–¥–µ —É–∂–µ –∏–º–µ—é—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ

#### –®–∞–≥–∏:

1. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–ª–æ–¥–µ –µ—Å—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã:**
   ```typescript
   // –ü–æ–ª—É—á–∞–µ–º –∫–æ–ª–æ–¥—É —Å –¥–µ—Ç–∞–ª—è–º–∏
   const deck = await api.get(`/cards/decks/${deckId}/`);
   
   // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É —Å–ª–æ–≤ –µ—Å—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
   const wordsWithMedia = deck.data.words.filter(
     word => word.image_file && word.audio_file
   );
   
   if (wordsWithMedia.length === 0) {
     alert('‚ö†Ô∏è –í –∫–æ–ª–æ–¥–µ –Ω–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤! –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ –¥–ª—è —Å–ª–æ–≤.');
     return;
   }
   ```

2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ .apkg —Ñ–∞–π–ª:**
   ```typescript
   // POST /api/cards/decks/{deck_id}/generate/
   const response = await api.post(`/cards/decks/${deckId}/generate/`);
   
   // –û—Ç–≤–µ—Ç:
   // {
   //   file_id: "uuid-string",
   //   download_url: "/api/cards/download/{file_id}/",
   //   deck_name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–¥—ã",
   //   cards_count: 76
   // }
   ```

3. **–°–∫–∞—á–∏–≤–∞–π—Ç–µ —Ñ–∞–π–ª:**
   ```typescript
   const fileId = response.data.file_id;
   
   // GET /api/cards/download/{file_id}/
   const blob = await api.get(`/cards/download/${fileId}/`, {
     responseType: 'blob'
   });
   
   // –°–æ–∑–¥–∞–µ–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
   const url = window.URL.createObjectURL(blob);
   const a = document.createElement('a');
   a.href = url;
   a.download = `${response.data.deck_name}.apkg`;
   document.body.appendChild(a);
   a.click();
   window.URL.revokeObjectURL(url);
   document.body.removeChild(a);
   ```

#### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏:

- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:** 8-9 MB –¥–ª—è –∫–æ–ª–æ–¥—ã —Å 38 —Å–ª–æ–≤–∞–º–∏ (76 –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤)
- **–ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä 50-60 KB:** –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–ª–æ–≤–∞ –∏–º–µ—é—Ç `image_file` –∏ `audio_file`

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–ª–æ–¥—É)

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–æ–≤.**

#### –®–∞–≥–∏:

1. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞:**
   ```typescript
   const words = ['Haus', 'Auto', 'Buch'];
   const mediaFiles = {
     images: {},
     audio: {}
   };
   
   for (const word of words) {
     // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
     const imageResponse = await api.post('/media/generate-image/', {
       word: word,
       translation: translations[word],
       language: 'de',
       image_style: 'balanced'
     });
     mediaFiles.images[word] = imageResponse.data.image_url;
     
     // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∞—É–¥–∏–æ
     const audioResponse = await api.post('/media/generate-audio/', {
       word: word,
       language: 'de'
     });
     mediaFiles.audio[word] = audioResponse.data.audio_url;
   }
   ```

2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ .apkg —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏:**
   ```typescript
   // POST /api/cards/generate/
   const response = await api.post('/cards/generate/', {
     words: words.join(','),
     language: 'de',
     translations: translations,
     deck_name: '–ù–æ–≤–∞—è –∫–æ–ª–æ–¥–∞',
     image_files: mediaFiles.images,  // ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
     audio_files: mediaFiles.audio,   // ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
     save_to_decks: false
   });
   ```

3. **–°–∫–∞—á–∏–≤–∞–π—Ç–µ —Ñ–∞–π–ª:**
   ```typescript
   const fileId = response.data.file_id;
   const blob = await api.get(`/cards/download/${fileId}/`, {
     responseType: 'blob'
   });
   // ... (–∫–æ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–∞–∫ –≤—ã—à–µ)
   ```

#### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:

- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ `image_files` –∏ `audio_files`** –≤ –∑–∞–ø—Ä–æ—Å–µ `POST /api/cards/generate/`
- –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–ª–æ–≤–∞—Ä—è–º–∏: `{ '—Å–ª–æ–≤–æ': 'URL_–∫_—Ñ–∞–π–ª—É' }`
- URL –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω—ã–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://get-anki.fan.ngrok.app/media/images/...`)

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –†–∞–∑–º–µ—Ä .apkg —Ñ–∞–π–ª–∞ 50-60 KB

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –±—ã–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã:**
   ```typescript
   // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–ª–æ–≤–∞ –∏–º–µ—é—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
   const deck = await api.get(`/cards/decks/${deckId}/`);
   console.log('–°–ª–æ–≤–∞ —Å –º–µ–¥–∏–∞:', deck.data.words.filter(w => w.image_file && w.audio_file));
   ```

2. **–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –≤ –∑–∞–ø—Ä–æ—Å–µ:**
   ```typescript
   // –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–µ—Ä–µ–¥–∞–µ—Ç–µ:
   console.log('image_files:', image_files);  // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç
   console.log('audio_files:', audio_files);  // –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—ä–µ–∫—Ç
   ```

3. **URL –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:**
   ```typescript
   // URL –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω—ã–º–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏
   // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: 'https://get-anki.fan.ngrok.app/media/images/xxx.jpg'
   // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: '/media/images/xxx.jpg'
   // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: 'images/xxx.jpg'
   ```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:

```typescript
// –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ .apkg –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
const blob = await api.get(`/cards/download/${fileId}/`, {
  responseType: 'blob'
});

console.log('–†–∞–∑–º–µ—Ä .apkg —Ñ–∞–π–ª–∞:', blob.size, '–±–∞–π—Ç');
console.log('–†–∞–∑–º–µ—Ä –≤ KB:', blob.size / 1024);
console.log('–†–∞–∑–º–µ—Ä –≤ MB:', blob.size / 1024 / 1024);

// –î–ª—è –∫–æ–ª–æ–¥—ã —Å 38 —Å–ª–æ–≤–∞–º–∏ (76 –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~8-9 MB
if (blob.size < 100000) {  // –ú–µ–Ω—å—à–µ 100 KB
  console.error('‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã!');
}
```

---

## üìù –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –∫–æ–¥–∞

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è .apkg –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–ª–æ–¥—ã:

```typescript
async function generateApkgFromDeck(deckId: number) {
  try {
    // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–æ–¥—É
    const deckResponse = await api.get(`/cards/decks/${deckId}/`);
    const deck = deckResponse.data;
    
    if (deck.words.length === 0) {
      throw new Error('–ö–æ–ª–æ–¥–∞ –ø—É—Å—Ç–∞');
    }
    
    const wordsWithMedia = deck.words.filter(
      w => w.image_file && w.audio_file
    );
    
    if (wordsWithMedia.length === 0) {
      throw new Error('–í –∫–æ–ª–æ–¥–µ –Ω–µ—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤. –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ.');
    }
    
    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ ${wordsWithMedia.length} —Å–ª–æ–≤ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏`);
    
    // 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º .apkg
    const generateResponse = await api.post(`/cards/decks/${deckId}/generate/`);
    const fileId = generateResponse.data.file_id;
    
    console.log('‚úÖ .apkg —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω:', fileId);
    
    // 3. –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
    const blob = await api.get(`/cards/download/${fileId}/`, {
      responseType: 'blob'
    });
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä
    const sizeMB = blob.size / 1024 / 1024;
    console.log(`üì¶ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: ${sizeMB.toFixed(2)} MB`);
    
    if (sizeMB < 1) {
      console.warn('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–ª–∏—à–∫–æ–º –º–∞–ª! –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å.');
    }
    
    // –°–∫–∞—á–∏–≤–∞–µ–º
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `${deck.name}.apkg`;
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    
    return { success: true, fileId, sizeMB };
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ .apkg:', error);
    throw error;
  }
}
```

### –ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è .apkg:

```typescript
async function quickGenerateApkg(
  words: string[],
  translations: Record<string, string>,
  language: string = 'de'
) {
  try {
    const imageFiles: Record<string, string> = {};
    const audioFiles: Record<string, string> = {};
    
    // 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞
    console.log('üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤...');
    
    for (const word of words) {
      // –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      const imageRes = await api.post('/media/generate-image/', {
        word: word,
        translation: translations[word],
        language: language,
        image_style: 'balanced'
      });
      imageFiles[word] = imageRes.data.image_url;
      
      // –ê—É–¥–∏–æ
      const audioRes = await api.post('/media/generate-audio/', {
        word: word,
        language: language
      });
      audioFiles[word] = audioRes.data.audio_url;
      
      console.log(`‚úÖ ${word}: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –∞—É–¥–∏–æ –≥–æ—Ç–æ–≤—ã`);
    }
    
    // 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º .apkg
    console.log('üì¶ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è .apkg —Ñ–∞–π–ª–∞...');
    
    const generateResponse = await api.post('/cards/generate/', {
      words: words.join(','),
      language: language,
      translations: translations,
      deck_name: '–ë—ã—Å—Ç—Ä–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è',
      image_files: imageFiles,  // ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
      audio_files: audioFiles,   // ‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
      save_to_decks: false
    });
    
    const fileId = generateResponse.data.file_id;
    
    // 3. –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª
    const blob = await api.get(`/cards/download/${fileId}/`, {
      responseType: 'blob'
    });
    
    const sizeMB = blob.size / 1024 / 1024;
    console.log(`üì¶ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: ${sizeMB.toFixed(2)} MB`);
    
    if (sizeMB < 1) {
      console.warn('‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–ª–∏—à–∫–æ–º –º–∞–ª!');
    }
    
    // –°–∫–∞—á–∏–≤–∞–µ–º
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `–ë—ã—Å—Ç—Ä–∞—è_–≥–µ–Ω–µ—Ä–∞—Ü–∏—è.apkg`;
    document.body.appendChild(a);
    a.click();
    window.URL.revokeObjectURL(url);
    document.body.removeChild(a);
    
    return { success: true, fileId, sizeMB };
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ .apkg:', error);
    throw error;
  }
}
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π .apkg

- [ ] –ö–æ–ª–æ–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–æ–≤–∞ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ —á–µ—Ä–µ–∑ `GET /api/cards/decks/{id}/`)
- [ ] –°–ª–æ–≤–∞ –∏–º–µ—é—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã (`image_file` –∏ `audio_file` –Ω–µ null)
- [ ] –ü—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã `image_files` –∏ `audio_files` –≤ –∑–∞–ø—Ä–æ—Å–µ
- [ ] URL –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –ø–æ–ª–Ω—ã–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ
- [ ] –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 1 MB –¥–ª—è –∫–æ–ª–æ–¥—ã —Å –º–µ–¥–∏–∞)
- [ ] –§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Anki

---

## üìû –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è `‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∞—É–¥–∏–æ—Ñ–∞–π–ª` –∏ `‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è`
   - –ï—Å–ª–∏ –µ—Å—Ç—å `‚ùå –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω` ‚Äî –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç API:**
   ```typescript
   const response = await api.post(`/cards/decks/${deckId}/generate/`);
   console.log('–û—Ç–≤–µ—Ç API:', response.data);
   // –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å: file_id, download_url, deck_name, cards_count
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Å–∫–∞—á–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:**
   ```typescript
   const blob = await api.get(`/cards/download/${fileId}/`, {
     responseType: 'blob'
   });
   console.log('–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞:', blob.size);
   // –î–ª—è 38 —Å–ª–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~8-9 MB
   ```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 7 –¥–µ–∫–∞–±—Ä—è 2025

