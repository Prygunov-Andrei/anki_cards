# ✨ Исправление отображения пустых карточек

## Проблема

После исправления бэкенда (создание уникальных слов для пустых карточек с префиксом `_empty_`), технические метки вида `_empty_322` отображались пользователю в интерфейсе, что выглядело некрасиво.

## Решение

Добавлена фронтенд-фильтрация технических меток с отображением вместо них вопросительных знаков `???`.

### Добавленные вспомогательные функции

**Файл:** `/utils/helpers.ts`

```typescript
/**
 * Проверить, является ли слово техническим пустым словом
 */
export const isEmptyWord = (word: string): boolean => {
  return word.startsWith('_empty_');
};

/**
 * Отобразить слово: если это техническое пустое слово, показать вопросительные знаки
 */
export const displayWord = (word: string): string => {
  if (isEmptyWord(word)) {
    return '???';
  }
  return word;
};
```

### Обновленные компоненты

Функция `displayWord()` применена во всех компонентах, где отображаются слова:

1. ✅ **WordCard** (`/components/WordCard.tsx`)
   - Отображение слова в режиме просмотра
   - Отображение слова при inline редактировании через EditableText

2. ✅ **WordsTable** (`/components/WordsTable.tsx`)
   - Импорт функции displayWord
   - Передача слов в WordCard (который уже использует displayWord)

3. ✅ **EditableText** (`/components/EditableText.tsx`)
   - Отображение в режиме просмотра
   - При клике на редактирование показывается реальное значение (для возможности изменить)

4. ✅ **ImagePreviewModal** (`/components/ImagePreviewModal.tsx`)
   - Заголовок модального окна
   - Alt текст изображения
   - Описание для screen readers

## Поведение

### Режим просмотра
- Техническое слово `_empty_322` → отображается как `???`
- Обычное слово `Haus` → отображается как `Haus`

### Режим редактирования
- При клике на `???` в EditableText
- В input показывается реальное значение `_empty_322`
- Пользователь может изменить его на нормальное слово
- После сохранения новое слово отображается как обычно

### Модальные окна
- В превью изображения заголовок показывает `???` вместо `_empty_322`
- Пользователь видит понятный интерфейс без технических деталей

## UX улучшения

### До исправления:
```
Карточка:
┌─────────────────┐
│ _empty_322      │  ❌ Технические детали видны пользователю
│ Haus // дом     │
└─────────────────┘
```

### После исправления:
```
Карточка:
┌─────────────────┐
│ ???             │  ✅ Понятный символ для "пустой карточки"
│ Haus // дом     │
└─────────────────┘
```

## Альтернативные варианты

Вместо `???` можно было использовать:
- `` (пустая строка) - но может быть непонятно, что это специальная карточка
- `___` (подчеркивания) - но выглядит как placeholder
- `[пусто]` (текст) - но занимает много места
- `∅` (математический символ) - но может быть непонятен

Выбран вариант `???` как:
- ✅ Короткий и компактный
- ✅ Интуитивно понятный (вопрос = нужно вспомнить)
- ✅ Универсальный для всех языков
- ✅ Визуально заметный

## Тестирование

1. Создайте пустую карточку для слова
2. Проверьте, что в карточке отображается `???` вместо `_empty_322`
3. Кликните на `???` для редактирования - должно показаться реальное значение
4. Откройте превью изображения - в заголовке должно быть `???`
5. Измените `_empty_322` на обычное слово - должно отображаться как обычно

## Статус

✅ **ПОЛНОСТЬЮ РЕАЛИЗОВАНО**

---

**Дата:** 12 декабря 2025  
**Связанные файлы:**
- `/utils/helpers.ts` - вспомогательные функции
- `/components/WordCard.tsx` - карточка слова
- `/components/WordsTable.tsx` - таблица слов
- `/components/EditableText.tsx` - inline редактирование
- `/components/ImagePreviewModal.tsx` - превью изображений
