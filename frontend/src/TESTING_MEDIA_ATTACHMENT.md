# üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ–¥–∏–∞ –∫ —Å–ª–æ–≤–∞–º

## ‚úÖ Backend –≥–æ—Ç–æ–≤!

**Endpoint:** `PATCH /api/cards/decks/{deck_id}/words/{word_id}/`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```json
{
  "image_file": "/media/images/xxx.jpg",  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "audio_file": "/media/audio/yyy.mp3",   // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "translation": "–Ω–æ–≤—ã–π –ø–µ—Ä–µ–≤–æ–¥"          // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": 107,
  "original_word": "Die Herausforderung",
  "translation": "–í—ã–∑–æ–≤",
  "language": "de",
  "image_file": "/media/images/xxx.jpg",
  "audio_file": "/media/audio/yyy.mp3",
  "updated_fields": ["image_file", "audio_file"]
}
```

---

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –û–¥–Ω–æ —Å–ª–æ–≤–æ —Å –ø–æ–ª–Ω—ã–º –º–µ–¥–∏–∞

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ: `cat`
3. –ù–∞–∂–∞—Ç—å "–ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥" ‚Üí –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
4. ‚úÖ –í–∫–ª—é—á–∏—Ç—å "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
5. ‚úÖ –í–∫–ª—é—á–∏—Ç—å "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ"
6. ‚úÖ –ß–µ–∫–±–æ–∫—Å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ú–æ–∏ –∫–æ–ª–æ–¥—ã" –≤–∫–ª—é—á—ë–Ω
7. –ù–∞–∂–∞—Ç—å "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–∞–ø—ã
- ‚úÖ –§–∞–π–ª `–ù–æ–≤–∞—è –∫–æ–ª–æ–¥–∞.apkg` —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ö–æ–ª–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω!"
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GenerationSuccess` —Å –∫–Ω–æ–ø–∫–∞–º–∏
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `‚úÖ –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Å–ª–æ–≤—É "cat": ["image_file", "audio_file"]`
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `üéâ –í—Å–µ–≥–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –º–µ–¥–∏–∞ –∫ 1 —Å–ª–æ–≤–∞–º`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ "–ú–æ–∏ –∫–æ–ª–æ–¥—ã":**
1. –ù–∞–∂–∞—Ç—å "–û—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ" –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ "–ú–æ–∏ –∫–æ–ª–æ–¥—ã"
2. –û—Ç–∫—Ä—ã—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—É—é –∫–æ–ª–æ–¥—É
3. –í —Ç–∞–±–ª–∏—Ü–µ —Å–ª–æ–≤ –¥–ª—è "cat" –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∫–æ–Ω–∫–∏:
   - üñºÔ∏è (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
   - üîä (–∞—É–¥–∏–æ)
4. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∏–∫–æ–Ω–∫–∏ ‚Üí –º–µ–¥–∏–∞ –¥–æ–ª–∂–Ω—ã –æ—Ç–∫—Ä—ã—Ç—å—Å—è

**Network –∑–∞–ø—Ä–æ—Å—ã:**
```
1. POST /api/media/generate-image/
   ‚Üí { image_url: "/media/images/cat_xxx.jpg" }

2. POST /api/media/generate-audio/
   ‚Üí { audio_url: "/media/audio/cat_yyy.mp3" }

3. POST /api/cards/generate/
   ‚Üí { file_id: "uuid-xxx", deck_id: 42 }

4. GET /api/cards/decks/42/
   ‚Üí { id: 42, words: [{ id: 1, original_word: "cat", ... }] }

5. PATCH /api/cards/decks/42/words/1/
   Body: {
     image_file: "/media/images/cat_xxx.jpg",
     audio_file: "/media/audio/cat_yyy.mp3"
   }
   ‚Üí { id: 1, updated_fields: ["image_file", "audio_file"] }

6. GET /api/cards/download-deck/{file_id}/
   ‚Üí binary .apkg file
```

---

### –¢–µ—Å—Ç 2: –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ —Å –º–µ–¥–∏–∞

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å 3 —Å–ª–æ–≤–∞: `cat`, `dog`, `bird`
2. –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –≤—Å–µ—Ö
3. ‚úÖ –í–∫–ª—é—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∞—É–¥–∏–æ
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ 3 —Å–ª–æ–≤–∞ —Å –º–µ–¥–∏–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ 3 —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞
- ‚úÖ –ò—Ç–æ–≥–æ: `üéâ –í—Å–µ–≥–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –º–µ–¥–∏–∞ –∫ 3 —Å–ª–æ–≤–∞–º`

**Network –∑–∞–ø—Ä–æ—Å—ã:**
```
1. POST /api/media/generate-image/  (3 —Ä–∞–∑–∞ - –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞)
2. POST /api/media/generate-audio/   (3 —Ä–∞–∑–∞)
3. POST /api/cards/generate/         (1 —Ä–∞–∑)
4. GET /api/cards/decks/42/          (1 —Ä–∞–∑)
5. PATCH /api/cards/decks/42/words/1/ (cat)
6. PATCH /api/cards/decks/42/words/2/ (dog)
7. PATCH /api/cards/decks/42/words/3/ (bird)
8. GET /api/cards/download-deck/...  (1 —Ä–∞–∑)
```

---

### –¢–µ—Å—Ç 3: –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±–µ–∑ –∞—É–¥–∏–æ)

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ: `hello`
2. –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
3. ‚úÖ –í–∫–ª—é—á–∏—Ç—å "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"
4. ‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏–æ"
5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ: –∏–∫–æ–Ω–∫–∞ üñºÔ∏è –µ—Å—Ç—å, –∏–∫–æ–Ω–∫–∞ üîä –ù–ï–¢
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `updated_fields: ["image_file"]`

**PATCH –∑–∞–ø—Ä–æ—Å:**
```json
PATCH /api/cards/decks/42/words/1/
{
  "image_file": "/media/images/hello_xxx.jpg"
  // audio_file –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
}
```

---

### –¢–µ—Å—Ç 4: –¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ (–±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ: `world`
2. ‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. ‚úÖ –í–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏–æ
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ: –∏–∫–æ–Ω–∫–∞ üîä –µ—Å—Ç—å, –∏–∫–æ–Ω–∫–∞ üñºÔ∏è –ù–ï–¢
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `updated_fields: ["audio_file"]`

**PATCH –∑–∞–ø—Ä–æ—Å:**
```json
PATCH /api/cards/decks/42/words/1/
{
  "audio_file": "/media/audio/world_yyy.mp3"
  // image_file –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
}
```

---

### –¢–µ—Å—Ç 5: –ë–µ–∑ –º–µ–¥–∏–∞ (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç)

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞
2. ‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. ‚ùå –û—Ç–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏–æ
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–æ–ª–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ: –ø—Ä–æ—á–µ—Ä–∫–∏ –≤ —Å—Ç–æ–ª–±—Ü–µ "–ú–µ–¥–∏–∞"
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: –ù–ï–¢ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞ (—Ç.–∫. –Ω–µ—á–µ–≥–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å)
- ‚úÖ **–ù–ï–¢ PATCH –∑–∞–ø—Ä–æ—Å–æ–≤** (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

**Network –∑–∞–ø—Ä–æ—Å—ã:**
```
1. POST /api/cards/generate/
2. GET /api/cards/decks/42/
   (–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –Ω–µ—Ç –º–µ–¥–∏–∞ –¥–ª—è –ø—Ä–∏–≤—è–∑–∫–∏)
3. GET /api/cards/download-deck/...
   (PATCH –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç!)
```

---

### –¢–µ—Å—Ç 6: –ß–∞—Å—Ç–∏—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å 3 —Å–ª–æ–≤–∞: `cat`, `dog`, `bird`
2. –í–∫–ª—é—á–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
4. **–î–ª—è "dog" –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å (—Å–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞)**
5. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `imageFiles = { "cat": "...", "bird": "..." }` (–±–µ–∑ "dog")
- ‚úÖ –ö–æ–ª–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å 3 —Å–ª–æ–≤–∞–º–∏
- ‚úÖ –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∫ "cat" –∏ "bird"
- ‚úÖ –£ "dog" –ø—Ä–æ—á–µ—Ä–∫ –≤ —Å—Ç–æ–ª–±—Ü–µ "–ú–µ–¥–∏–∞"
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `üéâ –í—Å–µ–≥–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –º–µ–¥–∏–∞ –∫ 2 —Å–ª–æ–≤–∞–º`

**PATCH –∑–∞–ø—Ä–æ—Å—ã:**
```
1. PATCH /api/cards/decks/42/words/1/  (cat) ‚úÖ
   (dog –ø—Ä–æ–ø—É—â–µ–Ω - –Ω–µ—Ç –º–µ–¥–∏–∞)
2. PATCH /api/cards/decks/42/words/3/  (bird) ‚úÖ
```

---

### –¢–µ—Å—Ç 7: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ë–ï–ó —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–ª–æ–¥—ã

**–®–∞–≥–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–æ
2. –í–∫–ª—é—á–∏—Ç—å –º–µ–¥–∏–∞
3. ‚ùå **–û—Ç–∫–ª—é—á–∏—Ç—å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ú–æ–∏ –∫–æ–ª–æ–¥—ã"**
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§–∞–π–ª `.apkg` —Å–∫–∞—á–∞–Ω
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "–ö–∞—Ä—Ç–æ—á–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!" (–±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è "–ú–æ–∏ –∫–æ–ª–æ–¥—ã")
- ‚úÖ `GenerationSuccess` –ù–ï –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: –ù–ï–¢ —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞
- ‚úÖ **–ù–ï–¢ GET/PATCH –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∫–æ–ª–æ–¥—ã**

**Network –∑–∞–ø—Ä–æ—Å—ã:**
```
1. POST /api/media/generate-image/
2. POST /api/media/generate-audio/
3. POST /api/cards/generate/
   ‚Üí { file_id: "xxx" }  (–±–µ–∑ deck_id)
4. GET /api/cards/download-deck/...
   (–ó–∞–ø—Ä–æ—Å–æ–≤ –∫ /api/cards/decks/ –ù–ï–¢!)
```

---

### –¢–µ—Å—Ç 8: –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞

**–°—Ü–µ–Ω–∞—Ä–∏–π:** PATCH –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫—É

**–°–∏–º—É–ª—è—Ü–∏—è:**
```javascript
// –í deck.service.ts –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
async updateWordMedia(...) {
  throw new Error('Simulated error');
}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏: `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ–¥–∏–∞ –∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∫–æ–ª–æ–¥–µ: Error...`
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **–ù–ï –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è**
- ‚úÖ –§–∞–π–ª `.apkg` –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ö–æ–ª–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∞ (–±–µ–∑ –º–µ–¥–∏–∞)
- ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –º–µ–¥–∏–∞ –≤—Ä—É—á–Ω—É—é –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ DevTools

### Console

**–£—Å–ø–µ—à–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –º–µ–¥–∏–∞:**
```
‚úÖ –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Å–ª–æ–≤—É "cat": ["image_file", "audio_file"]
‚úÖ –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Å–ª–æ–≤—É "dog": ["image_file", "audio_file"]
‚úÖ –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ —Å–ª–æ–≤—É "bird": ["image_file"]
üéâ –í—Å–µ–≥–æ –ø—Ä–∏–≤—è–∑–∞–Ω–æ –º–µ–¥–∏–∞ –∫ 3 —Å–ª–æ–≤–∞–º
```

**–ë–µ–∑ –º–µ–¥–∏–∞:**
```
(–Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ –ø—Ä–∏–≤—è–∑–∫–µ)
```

**–û—à–∏–±–∫–∞:**
```
‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ–¥–∏–∞ –∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π –∫–æ–ª–æ–¥–µ: Error: ...
```

---

### Network

**PATCH –∑–∞–ø—Ä–æ—Å (—É—Å–ø–µ—à–Ω—ã–π):**
```
Request URL: /api/cards/decks/42/words/1/
Request Method: PATCH
Status Code: 200 OK

Request Payload:
{
  "image_file": "/media/images/cat_abc123.jpg",
  "audio_file": "/media/audio/cat_def456.mp3"
}

Response:
{
  "id": 1,
  "original_word": "cat",
  "translation": "–∫–æ—à–∫–∞",
  "language": "en",
  "image_file": "/media/images/cat_abc123.jpg",
  "audio_file": "/media/audio/cat_def456.mp3",
  "updated_fields": ["image_file", "audio_file"]
}
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∫–æ–ª–æ–¥—ã

### –¢–∞–±–ª–∏—Ü–∞ —Å–ª–æ–≤

**–°—Ç–æ–ª–±–µ—Ü "–ú–µ–¥–∏–∞":**

| –°–ª–æ–≤–æ | –ü–µ—Ä–µ–≤–æ–¥ | –ú–µ–¥–∏–∞ | –î–µ–π—Å—Ç–≤–∏—è |
|-------|---------|-------|----------|
| cat | –∫–æ—à–∫–∞ | üñºÔ∏è üîä | ‚úèÔ∏è üóëÔ∏è |
| dog | —Å–æ–±–∞–∫–∞ | üñºÔ∏è üîä | ‚úèÔ∏è üóëÔ∏è |
| bird | –ø—Ç–∏—Ü–∞ | üñºÔ∏è - | ‚úèÔ∏è üóëÔ∏è |

**–õ–µ–≥–µ–Ω–¥–∞:**
- üñºÔ∏è = –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- üîä = –µ—Å—Ç—å –∞—É–¥–∏–æ
- `-` = –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

### –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ ‚úèÔ∏è:**

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
2. –ü–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã:
   - –°–ª–æ–≤–æ: `cat`
   - –ü–µ—Ä–µ–≤–æ–¥: `–∫–æ—à–∫–∞`
   - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: `[–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è]` + `üóëÔ∏è –£–¥–∞–ª–∏—Ç—å`
   - –ê—É–¥–∏–æ: `[üîä –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏]` + `üóëÔ∏è –£–¥–∞–ª–∏—Ç—å`

3. –ö–ª–∏–∫ –Ω–∞ üóëÔ∏è —É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - –ü—Ä–µ–≤—å—é –∏—Å—á–µ–∑–∞–µ—Ç
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ"

4. –ö–ª–∏–∫ –Ω–∞ üîä:
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –∞—É–¥–∏–æ

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –ú–µ–¥–∏–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è —Å–ª–æ–≤
- [ ] –ö–æ–ª–æ–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ "–ú–æ–∏ –∫–æ–ª–æ–¥—ã"
- [ ] –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ —Å–ª–æ–≤–∞–º (–∏–∫–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ)
- [ ] –í –∫–æ–Ω—Å–æ–ª–∏ –ª–æ–≥–∏ –æ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞
- [ ] PATCH –∑–∞–ø—Ä–æ—Å—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –û—Ç–≤–µ—Ç –æ—Ç –±—ç–∫–µ–Ω–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç `updated_fields`
- [ ] –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –º–µ–¥–∏–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- [ ] –ú–æ–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞—É–¥–∏–æ
- [ ] –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- [ ] –ë–µ–∑ –º–µ–¥–∏–∞ –Ω–µ—Ç PATCH –∑–∞–ø—Ä–æ—Å–æ–≤ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

### ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏

- [ ] –ß–∞—Å—Ç–∏—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ–¥–∏–∞ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–ª–æ–¥—ã
- [ ] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–∏–≤—è–∑–∫–µ –º–µ–¥–∏–∞ (–ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è)
- [ ] –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±–µ–∑ –∞—É–¥–∏–æ)
- [ ] –¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ (–±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- [ ] –ë–µ–∑ –º–µ–¥–∏–∞ –≤–æ–æ–±—â–µ

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:**

1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
2. –î–æ–±–∞–≤–∏—Ç—å: `cat`
3. –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
4. ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
5. ‚úÖ –ê—É–¥–∏–æ
6. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–ª–æ–¥—ã
7. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
8. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä ‚Üí **–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∫–æ–Ω–∫–∏ üñºÔ∏è üîä**

**–ï—Å–ª–∏ –∏–∫–æ–Ω–∫–∏ –µ—Å—Ç—å ‚Üí –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ**

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

- [x] Backend endpoint `/api/cards/decks/{deck_id}/words/{word_id}/` —Å–æ–∑–¥–∞–Ω
- [x] Frontend –∫–æ–¥ –æ–±–Ω–æ–≤–ª—ë–Ω (MainPage.tsx)
- [x] –¢–∏–ø—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã (deck.service.ts)
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ (console.log)

### –í–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –û—Ç–∫—Ä—ã—Ç—å DevTools Console
- [ ] –û—Ç–∫—Ä—ã—Ç—å DevTools Network
- [ ] –°–ª–µ–¥–∏—Ç—å –∑–∞ –∑–∞–ø—Ä–æ—Å–∞–º–∏ PATCH
- [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] –ü—Ä–æ–≤–µ—Ä—è—Ç—å –æ—Ç–≤–µ—Ç—ã –æ—Ç API

### –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ú–µ–¥–∏–∞ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –º–µ–¥–∏–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ú–µ–¥–∏–∞ –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç –ª–æ–≥–æ–≤ –æ –ø—Ä–∏–≤—è–∑–∫–µ
- PATCH –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `imageFiles` –∏ `audioFiles` –≤ –∫–æ–Ω—Å–æ–ª–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `deck_id` –≤–µ—Ä–Ω—É–ª—Å—è –æ—Ç API
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —á–µ–∫–±–æ–∫—Å "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–ª–æ–¥—ã" –≤–∫–ª—é—á—ë–Ω

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: PATCH –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –∫–æ–Ω—Å–æ–ª–∏: `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –º–µ–¥–∏–∞...`
- Network: `404 Not Found`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ª–æ–≤–∞ —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL: `/api/cards/decks/{deck_id}/words/{word_id}/`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (Token)

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: URL –º–µ–¥–∏–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

**–°–∏–º–ø—Ç–æ–º—ã:**
- PATCH —É—Å–ø–µ—à–µ–Ω
- –ù–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –º–µ–¥–∏–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è (404)

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç URL: `/media/images/xxx.jpg` vs `https://...`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MEDIA_URL –≤ Django

---

**–î–∞—Ç–∞:** 2 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
